## The Power of Components

The core of `PhpSPA` is its component-based architecture. A component is a reusable piece of your UI, defined as a simple PHP function that returns an HTML string.

The magic happens when you use these components like HTML tags **inside the `heredoc` string** of another component. This allows you to build complex pages by nesting smaller, reusable parts.

### Functional Components

First, define a simple component.

```php
<?php
// A simple, reusable button component
function Button() {
   return <<<HTML
      <button>Click Me</button>
   HTML;
}
```

Now, use that `Button` component inside a main page component.

```php
<?php
function HomePage() {
    return <<<HTML
        <div class="container">
            <h1>Welcome!</h1>
            <p>Click the button below to continue.</p>

            <Button />
        </div>
    HTML;
}
```

### Handling Children and Props

Components become truly powerful when you pass data to them as props (attributes) and children (content inside the tags).

**1. Example Components with Props:**

```php
<?php
use function Component\HTMLAttrInArrayToString;

// Accepts children
function Card($children) {
    return <<<HTML
        <div class="card">
            {$children}
        </div>
    HTML;
}

// Accepts props and children
function LinkButton($to, $children, ...$attributes) {
   // Convert any extra HTML attributes into a string
   $attrString = HTMLAttrInArrayToString($attributes);

   return <<<HTML
      <a href="{$to}" {$attrString}>
         {$children}
      </a>
   HTML;
}
```

**2. Composing Them in a Page:**

Now, let's use these components inside a `UserProfile` component. This shows how everything nests together.

```php
<?php
function UserProfile() {
    return <<<HTML
        <Card>
            <h2>User Dashboard</h2>
            <p>Welcome back! Here are your options:</p>

            <LinkButton to="/settings" class="btn btn-primary">
                Edit Settings
            </LinkButton>

            <LinkButton to="/logout" class="btn btn-secondary">
                Log Out
            </LinkButton>
        </Card>
    HTML;
}
```

The key takeaway is that you build your entire UI by composing these components. As long as the final output is one component attached to the `App` class, `PhpSPA` will handle rendering the entire nested tree.



=====================================


## Advanced Component Patterns

Beyond simple functions, `PhpSPA` offers several powerful ways to structure and call your components, giving you flexibility for any project architecture.

### Class-Based Components

For more complex components that might have their own methods or properties, you can use a class. If a class has a `__render()` method, `PhpSPA` will automatically call it when the class is used as a component. Props and children are passed as arguments to the `__render` method.

```php
<?php
class Alert {
    // This method is called automatically
    public function __render($type, $children) {
        $class = "alert alert-{$type}"; // e.g., 'alert alert-success'

        return <<<HTML
            <div class="{$class}">
                {$children}
            </div>
        HTML;
    }
}

// How to use it:
function StatusMessage() {
    return <<<HTML
        <Alert type="success">
            <strong>Success!</strong> Your profile has been updated.
        </Alert>
    HTML;
}
````

You can even call other public methods of a class directly as components using the `::` syntax.

```php
<MyComponent::Header />
<MyComponent::Footer />
```

-----

### Namespaced and Variable Components

`PhpSPA` makes it easy to organize and use components from different parts of your codebase.

**1. Namespaced Components:**

If your component function is in a namespace, use a dot (`.`) instead of a backslash (`\`) to call it.

```php
<?php
// Assuming Button is in the UI\Elements namespace
function SomePage() {
    return <<<HTML
        <UI.Elements.Button />
    HTML;
}
```

**2. Callable Variable Components:**

You can assign a component to a variable and use it directly. This is great for dynamic components or for keeping your template logic clean. To use a variable component, prefix its name with `@` or `$` (if using `$`, escape it within `heredoc` strings: `<\$Link />`).

```php
<?php
function Navigation() {
    // Define a component as a callable variable
    $NavLink = fn ($to, $children) => <<<HTML
        <a href="{$to}" class="nav-link">{$children}</a>
    HTML;

   // Export the variable to make it available in the heredoc scope
   scope(compact('NavLink'));

    // Use the variable component with the @ prefix
    return <<<HTML
        <nav>
            <@NavLink to="/">Home</@NavLink>
            <@NavLink to="/about">About</@NavLink>

            <!-- Or using the $ prefix (escaped) -->
            <\$NavLink to="/contact">Contact</\$NavLink>
        </nav>
    HTML;
}
```