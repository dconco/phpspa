{"version":3,"file":"phpspa.js","sources":["../../lib/utils/baseConverter.ts","../../lib/core/RuntimeManager.ts","../../node_modules/.pnpm/morphdom@2.7.7/node_modules/morphdom/dist/morphdom-esm.js","../../lib/core/AppManager.ts","../../lib/index.ts"],"sourcesContent":["/**\r\n * UTF-8 safe base64 encoding function\r\n * Handles Unicode characters that btoa cannot process\r\n */\r\nexport function utf8ToBase64(str: string): string {\r\n   try {\r\n      // First try the native btoa for performance\r\n      return btoa(str);\r\n   } catch (e) {\r\n      // If btoa fails (due to non-Latin1 characters), use UTF-8 safe encoding\r\n      try {\r\n         // Modern replacement for unescape(encodeURIComponent(str))\r\n         const utf8Bytes = new TextEncoder().encode(str);\r\n         const binaryString = Array.from(utf8Bytes, byte => String.fromCharCode(byte)).join('');\r\n         return btoa(binaryString);\r\n      } catch (fallbackError) {\r\n         // Final fallback: encode each character individually\r\n         return btoa(\r\n            str.split('').map(function (c) {\r\n               return String.fromCharCode(c.charCodeAt(0) & 0xff);\r\n            }).join('')\r\n         );\r\n      }\r\n   }\r\n}\r\n\r\n/**\r\n * UTF-8 safe base64 decoding function\r\n * Handles Unicode characters that atob cannot process\r\n */\r\nexport function base64ToUtf8(str: string): string {\r\n   try {\r\n      // Try modern UTF-8 safe decoding first\r\n      const binaryString = atob(str);\r\n      const bytes = new Uint8Array(binaryString.length);\r\n      for (let i = 0; i < binaryString.length; i++) {\r\n         bytes[i] = binaryString.charCodeAt(i);\r\n      }\r\n      return new TextDecoder().decode(bytes);\r\n   } catch (e) {\r\n      // Fallback to regular atob\r\n      return atob(str);\r\n   }\r\n}\r\n","import { CurrentRoutesObject, EffectType, EventObject, EventPayload } from \"../types/RuntimeInterfaces\";\r\nimport { StateObject } from \"../types/StateObjectTypes\";\r\nimport { utf8ToBase64 } from \"../utils/baseConverter\";\r\n\r\n\r\n/**\r\n * Runtime Manager for PhpSPA\r\n *\r\n * Handles script execution, style injection, event management, and browser history\r\n * for the PhpSPA framework. Uses an obscure class name to avoid conflicts.\r\n */\r\nexport default class RuntimeManager {\r\n   /**\r\n    * Tracks executed scripts to prevent duplicates\r\n    */\r\n   private static executedScripts: Set<string> = new Set();\r\n\r\n   /**\r\n    * Tracks executed styles to prevent duplicates\r\n    */\r\n   private static executedStyles: Set<string> = new Set();\r\n\r\n   /**\r\n    * A static cache object that stores processed script content to avoid redundant processing.\r\n    * Used to improve performance by caching scripts that have already been processed or compiled.\r\n    */\r\n   private static ScriptsCachedContent: Record<string, string> = {};\r\n\r\n   /**\r\n    * This contains all routes for the current page\r\n    */\r\n   public static currentRoutes: CurrentRoutesObject = {};\r\n\r\n   public static events: EventObject = {\r\n      beforeload: [],\r\n      load: [],\r\n   };\r\n\r\n   private static effects: Set<EffectType> = new Set();\r\n\r\n   /**\r\n    * Registers a side effect to be executed when state changes\r\n    * similar to React's useEffect but using state keys strings as dependencies\r\n    *\r\n    * @param {Function} callback - The effect callback\r\n    * @param {Array<string>} dependencies - Array of state keys to listen for\r\n    */\r\n   public static registerEffect(callback: () => Function|undefined, dependencies: string[]|null = null): void {\r\n      // --- Run immediately (mount) ---\r\n      const cleanup = callback();\r\n\r\n      const effect: EffectType = {\r\n         callback,\r\n         dependencies,\r\n         cleanup: typeof cleanup === 'function' ? cleanup : null\r\n      };\r\n\r\n      RuntimeManager.effects.add(effect);\r\n   }\r\n\r\n   /**\r\n    * Triggers effects that depend on the specific state key\r\n    *\r\n    * @param key - The state key that changed\r\n    * @param value - The new value (optional)\r\n    */\r\n   public static triggerEffects(key: string, value: any): void {\r\n      RuntimeManager.effects.forEach(effect => {\r\n         if (effect.dependencies === null || effect.dependencies.includes(key)) {\r\n            // --- Run cleanup if exists ---\r\n            if (effect.cleanup) effect.cleanup();\r\n\r\n            // --- Re-run callback ---\r\n            const cleanup = effect.callback();\r\n            effect.cleanup = typeof cleanup === 'function' ? cleanup : null;\r\n         }\r\n      });\r\n   }\r\n\r\n   /**\r\n    * Clears all registered effects and runs their cleanup functions\r\n    */\r\n   public static clearEffects(): void {\r\n      RuntimeManager.effects.forEach(effect => {\r\n         if (effect.cleanup) effect.cleanup();\r\n      });\r\n      RuntimeManager.effects.clear();\r\n   }\r\n\r\n   public static runAll(): void {\r\n      for (const targetID in RuntimeManager.currentRoutes) {\r\n         const element = document.getElementById(targetID);\r\n\r\n         if (element) {\r\n            this.runInlineScripts(element);\r\n            this.runPhpSpaScripts(element);\r\n            this.runInlineStyles(element);\r\n         }\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Processes and executes inline scripts within a container\r\n    * Creates isolated scopes using IIFE to prevent variable conflicts\r\n    */\r\n   private static runInlineScripts(container: HTMLElement) {\r\n      const scripts = container.querySelectorAll(\"script\");\r\n      const nonce = document.documentElement.getAttribute('x-phpspa');\r\n\r\n      scripts.forEach((script: HTMLScriptElement) => {\r\n         // --- Use base64 encoded content as unique identifier ---\r\n         const contentHash = utf8ToBase64(script.textContent.trim());\r\n\r\n         // --- Skip if this script has already been executed ---\r\n         if (!this.executedScripts.has(contentHash) && script.textContent.trim() !== \"\") {\r\n            this.executedScripts.add(contentHash);\r\n\r\n            // --- Create new script element ---\r\n            const newScript = document.createElement(\"script\");\r\n\r\n            newScript.nonce = nonce ?? undefined;\r\n\r\n            // --- Copy all attributes except the data-type identifier ---\r\n            for (const attribute of Array.from(script.attributes)) {\r\n               newScript.setAttribute(attribute.name, attribute.value);\r\n            }\r\n\r\n            // --- Check if script should run in async context ---\r\n            const isAsync = script.hasAttribute(\"async\");\r\n\r\n            // --- Wrap in IIFE to create isolated scope ---\r\n            if (isAsync) {\r\n               newScript.textContent = `(async function() {\\n${script.textContent}\\n})();`;\r\n            } else {\r\n               newScript.textContent = `(function() {\\n${script.textContent}\\n})();`;\r\n            }\r\n\r\n            // --- Execute and immediately remove from DOM ---\r\n            document.head.appendChild(newScript).remove();\r\n         }\r\n      });\r\n   }\r\n\r\n\r\n   static runPhpSpaScripts(container: HTMLElement) {\r\n      const scripts = container.querySelectorAll(\"phpspa-script, script[data-type=\\\"phpspa/script\\\"]\") as NodeListOf<HTMLScriptElement>;\r\n\r\n      scripts.forEach(async (script: HTMLScriptElement): Promise<void> => {\r\n         const scriptUrl = script.getAttribute('src') ?? '';\r\n         const scriptType = script.getAttribute('type') ?? '';\r\n         const nonce = document.documentElement.getAttribute('x-phpspa');\r\n\r\n         // --- Skip if this script has already been executed ---\r\n         if (!this.executedScripts.has(scriptUrl)) {\r\n            this.executedScripts.add(scriptUrl);\r\n\r\n            // --- Check cache first ---\r\n            if (this.ScriptsCachedContent[scriptUrl]) {\r\n               const newScript = document.createElement(\"script\");\r\n               newScript.textContent = this.ScriptsCachedContent[scriptUrl];\r\n               newScript.nonce = nonce ?? undefined;\r\n               newScript.type = scriptType;\r\n\r\n               // --- Execute and immediately remove from DOM ---\r\n               document.head.appendChild(newScript).remove();\r\n               return;\r\n            }\r\n\r\n            const response = await fetch(scriptUrl, {\r\n               headers: {\r\n                  \"X-Requested-With\": \"PHPSPA_REQUEST_SCRIPT\",\r\n               },\r\n            });\r\n\r\n            if (response.ok) {\r\n               const scriptContent = await response.text();\r\n\r\n               // --- Create new script element ---\r\n               const newScript = document.createElement(\"script\");\r\n               newScript.textContent = scriptContent;\r\n               newScript.nonce = nonce ?? undefined;\r\n               newScript.type = scriptType;\r\n\r\n               // --- Execute and immediately remove from DOM ---\r\n               document.head.appendChild(newScript).remove();\r\n\r\n               // --- Cache the fetched script content ---\r\n               this.ScriptsCachedContent[scriptUrl] = scriptContent;\r\n            } else {\r\n               console.error(`Failed to load script from ${scriptUrl}: ${response.statusText}`);\r\n            }\r\n         }\r\n      });\r\n   }\r\n\r\n\r\n   /**\r\n    * Clears all executed scripts from the runtime manager.\r\n    * This method removes all entries from the executedScripts collection,\r\n    * effectively resetting the tracking of previously executed scripts.\r\n    *\r\n    * @static\r\n    * @memberof RuntimeManager\r\n    */\r\n   public static clearExecutedScripts() {\r\n      RuntimeManager.executedScripts.clear();\r\n   }\r\n\r\n   /**\r\n    * Processes and injects inline styles within a container\r\n    * Prevents duplicate style injection by tracking content hashes\r\n    */\r\n   private static runInlineStyles(container: HTMLElement) {\r\n      const styles = container.querySelectorAll(\"style\");\r\n      const nonce = document.documentElement.getAttribute('x-phpspa');\r\n\r\n      styles.forEach((style: HTMLStyleElement) => {\r\n         // --- Use base64 encoded content as unique identifier ---\r\n         const contentHash = utf8ToBase64(style.textContent.trim());\r\n\r\n         // --- Skip if this style has already been injected ---\r\n         if (!this.executedStyles.has(contentHash) && style.textContent.trim() !== \"\") {\r\n            this.executedStyles.add(contentHash);\r\n\r\n            // --- Create new style element ---\r\n            const newStyle = document.createElement(\"style\");\r\n            newStyle.nonce = nonce ?? undefined;\r\n\r\n            // --- Copy all attributes except the data-type identifier ---\r\n            for (const attribute of Array.from(style.attributes)) {\r\n               newStyle.setAttribute(attribute.name, attribute.value);\r\n            }\r\n\r\n            // --- Copy style content and inject into head ---\r\n            newStyle.textContent = style.textContent;\r\n            document.head.appendChild(newStyle).remove();\r\n         }\r\n      });\r\n   }\r\n\r\n   /**\r\n    * Emits a custom event to all registered listeners\r\n    * Used for lifecycle events like 'beforeload' and 'load'\r\n    *\r\n    * @param eventName - The name of the event to emit\r\n    * @param payload - The data to pass to event listeners\r\n    */\r\n   static emit(eventName: keyof EventObject, payload: EventPayload) {\r\n      const callbacks = this.events[eventName] || [];\r\n\r\n      // --- Execute all registered callbacks for this event ---\r\n      for (const callback of callbacks) {\r\n         if (typeof callback === \"function\") {\r\n            try {\r\n               callback(payload);\r\n            } catch (error) {\r\n               // --- Log callback errors but don't break the chain ---\r\n               console.error(`Error in ${eventName} event callback:`, error);\r\n            }\r\n         }\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Safely pushes a new state to browser history\r\n    * Wraps in try-catch to handle potential browser restrictions\r\n    */\r\n   public static pushState(data: StateObject, unused: string, url?: string | URL | null) {\r\n      try {\r\n         history.pushState(data, unused, url);\r\n      } catch (error) {\r\n         // --- Silently handle history API restrictions ---\r\n         console.warn(\"Failed to push history state:\", error instanceof Error ? error.message : error);\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Safely replaces current browser history state\r\n    * Wraps in try-catch to handle potential browser restrictions\r\n    */\r\n   public static replaceState(data: StateObject, unused: string, url?: string | URL | null) {\r\n      try {\r\n         history.replaceState(data, unused, url);\r\n      } catch (error) {\r\n         // --- Silently handle history API restrictions ---\r\n         console.warn(\"Failed to replace history state:\", error instanceof Error ? error.message : error);\r\n      }\r\n   }\r\n}\r\n","var DOCUMENT_FRAGMENT_NODE = 11;\n\nfunction morphAttrs(fromNode, toNode) {\n    var toNodeAttrs = toNode.attributes;\n    var attr;\n    var attrName;\n    var attrNamespaceURI;\n    var attrValue;\n    var fromValue;\n\n    // document-fragments dont have attributes so lets not do anything\n    if (toNode.nodeType === DOCUMENT_FRAGMENT_NODE || fromNode.nodeType === DOCUMENT_FRAGMENT_NODE) {\n      return;\n    }\n\n    // update attributes on original DOM element\n    for (var i = toNodeAttrs.length - 1; i >= 0; i--) {\n        attr = toNodeAttrs[i];\n        attrName = attr.name;\n        attrNamespaceURI = attr.namespaceURI;\n        attrValue = attr.value;\n\n        if (attrNamespaceURI) {\n            attrName = attr.localName || attrName;\n            fromValue = fromNode.getAttributeNS(attrNamespaceURI, attrName);\n\n            if (fromValue !== attrValue) {\n                if (attr.prefix === 'xmlns'){\n                    attrName = attr.name; // It's not allowed to set an attribute with the XMLNS namespace without specifying the `xmlns` prefix\n                }\n                fromNode.setAttributeNS(attrNamespaceURI, attrName, attrValue);\n            }\n        } else {\n            fromValue = fromNode.getAttribute(attrName);\n\n            if (fromValue !== attrValue) {\n                fromNode.setAttribute(attrName, attrValue);\n            }\n        }\n    }\n\n    // Remove any extra attributes found on the original DOM element that\n    // weren't found on the target element.\n    var fromNodeAttrs = fromNode.attributes;\n\n    for (var d = fromNodeAttrs.length - 1; d >= 0; d--) {\n        attr = fromNodeAttrs[d];\n        attrName = attr.name;\n        attrNamespaceURI = attr.namespaceURI;\n\n        if (attrNamespaceURI) {\n            attrName = attr.localName || attrName;\n\n            if (!toNode.hasAttributeNS(attrNamespaceURI, attrName)) {\n                fromNode.removeAttributeNS(attrNamespaceURI, attrName);\n            }\n        } else {\n            if (!toNode.hasAttribute(attrName)) {\n                fromNode.removeAttribute(attrName);\n            }\n        }\n    }\n}\n\nvar range; // Create a range object for efficently rendering strings to elements.\nvar NS_XHTML = 'http://www.w3.org/1999/xhtml';\n\nvar doc = typeof document === 'undefined' ? undefined : document;\nvar HAS_TEMPLATE_SUPPORT = !!doc && 'content' in doc.createElement('template');\nvar HAS_RANGE_SUPPORT = !!doc && doc.createRange && 'createContextualFragment' in doc.createRange();\n\nfunction createFragmentFromTemplate(str) {\n    var template = doc.createElement('template');\n    template.innerHTML = str;\n    return template.content.childNodes[0];\n}\n\nfunction createFragmentFromRange(str) {\n    if (!range) {\n        range = doc.createRange();\n        range.selectNode(doc.body);\n    }\n\n    var fragment = range.createContextualFragment(str);\n    return fragment.childNodes[0];\n}\n\nfunction createFragmentFromWrap(str) {\n    var fragment = doc.createElement('body');\n    fragment.innerHTML = str;\n    return fragment.childNodes[0];\n}\n\n/**\n * This is about the same\n * var html = new DOMParser().parseFromString(str, 'text/html');\n * return html.body.firstChild;\n *\n * @method toElement\n * @param {String} str\n */\nfunction toElement(str) {\n    str = str.trim();\n    if (HAS_TEMPLATE_SUPPORT) {\n      // avoid restrictions on content for things like `<tr><th>Hi</th></tr>` which\n      // createContextualFragment doesn't support\n      // <template> support not available in IE\n      return createFragmentFromTemplate(str);\n    } else if (HAS_RANGE_SUPPORT) {\n      return createFragmentFromRange(str);\n    }\n\n    return createFragmentFromWrap(str);\n}\n\n/**\n * Returns true if two node's names are the same.\n *\n * NOTE: We don't bother checking `namespaceURI` because you will never find two HTML elements with the same\n *       nodeName and different namespace URIs.\n *\n * @param {Element} a\n * @param {Element} b The target element\n * @return {boolean}\n */\nfunction compareNodeNames(fromEl, toEl) {\n    var fromNodeName = fromEl.nodeName;\n    var toNodeName = toEl.nodeName;\n    var fromCodeStart, toCodeStart;\n\n    if (fromNodeName === toNodeName) {\n        return true;\n    }\n\n    fromCodeStart = fromNodeName.charCodeAt(0);\n    toCodeStart = toNodeName.charCodeAt(0);\n\n    // If the target element is a virtual DOM node or SVG node then we may\n    // need to normalize the tag name before comparing. Normal HTML elements that are\n    // in the \"http://www.w3.org/1999/xhtml\"\n    // are converted to upper case\n    if (fromCodeStart <= 90 && toCodeStart >= 97) { // from is upper and to is lower\n        return fromNodeName === toNodeName.toUpperCase();\n    } else if (toCodeStart <= 90 && fromCodeStart >= 97) { // to is upper and from is lower\n        return toNodeName === fromNodeName.toUpperCase();\n    } else {\n        return false;\n    }\n}\n\n/**\n * Create an element, optionally with a known namespace URI.\n *\n * @param {string} name the element name, e.g. 'div' or 'svg'\n * @param {string} [namespaceURI] the element's namespace URI, i.e. the value of\n * its `xmlns` attribute or its inferred namespace.\n *\n * @return {Element}\n */\nfunction createElementNS(name, namespaceURI) {\n    return !namespaceURI || namespaceURI === NS_XHTML ?\n        doc.createElement(name) :\n        doc.createElementNS(namespaceURI, name);\n}\n\n/**\n * Copies the children of one DOM element to another DOM element\n */\nfunction moveChildren(fromEl, toEl) {\n    var curChild = fromEl.firstChild;\n    while (curChild) {\n        var nextChild = curChild.nextSibling;\n        toEl.appendChild(curChild);\n        curChild = nextChild;\n    }\n    return toEl;\n}\n\nfunction syncBooleanAttrProp(fromEl, toEl, name) {\n    if (fromEl[name] !== toEl[name]) {\n        fromEl[name] = toEl[name];\n        if (fromEl[name]) {\n            fromEl.setAttribute(name, '');\n        } else {\n            fromEl.removeAttribute(name);\n        }\n    }\n}\n\nvar specialElHandlers = {\n    OPTION: function(fromEl, toEl) {\n        var parentNode = fromEl.parentNode;\n        if (parentNode) {\n            var parentName = parentNode.nodeName.toUpperCase();\n            if (parentName === 'OPTGROUP') {\n                parentNode = parentNode.parentNode;\n                parentName = parentNode && parentNode.nodeName.toUpperCase();\n            }\n            if (parentName === 'SELECT' && !parentNode.hasAttribute('multiple')) {\n                if (fromEl.hasAttribute('selected') && !toEl.selected) {\n                    // Workaround for MS Edge bug where the 'selected' attribute can only be\n                    // removed if set to a non-empty value:\n                    // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/12087679/\n                    fromEl.setAttribute('selected', 'selected');\n                    fromEl.removeAttribute('selected');\n                }\n                // We have to reset select element's selectedIndex to -1, otherwise setting\n                // fromEl.selected using the syncBooleanAttrProp below has no effect.\n                // The correct selectedIndex will be set in the SELECT special handler below.\n                parentNode.selectedIndex = -1;\n            }\n        }\n        syncBooleanAttrProp(fromEl, toEl, 'selected');\n    },\n    /**\n     * The \"value\" attribute is special for the <input> element since it sets\n     * the initial value. Changing the \"value\" attribute without changing the\n     * \"value\" property will have no effect since it is only used to the set the\n     * initial value.  Similar for the \"checked\" attribute, and \"disabled\".\n     */\n    INPUT: function(fromEl, toEl) {\n        syncBooleanAttrProp(fromEl, toEl, 'checked');\n        syncBooleanAttrProp(fromEl, toEl, 'disabled');\n\n        if (fromEl.value !== toEl.value) {\n            fromEl.value = toEl.value;\n        }\n\n        if (!toEl.hasAttribute('value')) {\n            fromEl.removeAttribute('value');\n        }\n    },\n\n    TEXTAREA: function(fromEl, toEl) {\n        var newValue = toEl.value;\n        if (fromEl.value !== newValue) {\n            fromEl.value = newValue;\n        }\n\n        var firstChild = fromEl.firstChild;\n        if (firstChild) {\n            // Needed for IE. Apparently IE sets the placeholder as the\n            // node value and vise versa. This ignores an empty update.\n            var oldValue = firstChild.nodeValue;\n\n            if (oldValue == newValue || (!newValue && oldValue == fromEl.placeholder)) {\n                return;\n            }\n\n            firstChild.nodeValue = newValue;\n        }\n    },\n    SELECT: function(fromEl, toEl) {\n        if (!toEl.hasAttribute('multiple')) {\n            var selectedIndex = -1;\n            var i = 0;\n            // We have to loop through children of fromEl, not toEl since nodes can be moved\n            // from toEl to fromEl directly when morphing.\n            // At the time this special handler is invoked, all children have already been morphed\n            // and appended to / removed from fromEl, so using fromEl here is safe and correct.\n            var curChild = fromEl.firstChild;\n            var optgroup;\n            var nodeName;\n            while(curChild) {\n                nodeName = curChild.nodeName && curChild.nodeName.toUpperCase();\n                if (nodeName === 'OPTGROUP') {\n                    optgroup = curChild;\n                    curChild = optgroup.firstChild;\n                    // handle empty optgroups\n                    if (!curChild) {\n                        curChild = optgroup.nextSibling;\n                        optgroup = null;\n                    }\n                } else {\n                    if (nodeName === 'OPTION') {\n                        if (curChild.hasAttribute('selected')) {\n                            selectedIndex = i;\n                            break;\n                        }\n                        i++;\n                    }\n                    curChild = curChild.nextSibling;\n                    if (!curChild && optgroup) {\n                        curChild = optgroup.nextSibling;\n                        optgroup = null;\n                    }\n                }\n            }\n\n            fromEl.selectedIndex = selectedIndex;\n        }\n    }\n};\n\nvar ELEMENT_NODE = 1;\nvar DOCUMENT_FRAGMENT_NODE$1 = 11;\nvar TEXT_NODE = 3;\nvar COMMENT_NODE = 8;\n\nfunction noop() {}\n\nfunction defaultGetNodeKey(node) {\n  if (node) {\n    return (node.getAttribute && node.getAttribute('id')) || node.id;\n  }\n}\n\nfunction morphdomFactory(morphAttrs) {\n\n  return function morphdom(fromNode, toNode, options) {\n    if (!options) {\n      options = {};\n    }\n\n    if (typeof toNode === 'string') {\n      if (fromNode.nodeName === '#document' || fromNode.nodeName === 'HTML' || fromNode.nodeName === 'BODY') {\n        var toNodeHtml = toNode;\n        toNode = doc.createElement('html');\n        toNode.innerHTML = toNodeHtml;\n      } else {\n        toNode = toElement(toNode);\n      }\n    } else if (toNode.nodeType === DOCUMENT_FRAGMENT_NODE$1) {\n      toNode = toNode.firstElementChild;\n    }\n\n    var getNodeKey = options.getNodeKey || defaultGetNodeKey;\n    var onBeforeNodeAdded = options.onBeforeNodeAdded || noop;\n    var onNodeAdded = options.onNodeAdded || noop;\n    var onBeforeElUpdated = options.onBeforeElUpdated || noop;\n    var onElUpdated = options.onElUpdated || noop;\n    var onBeforeNodeDiscarded = options.onBeforeNodeDiscarded || noop;\n    var onNodeDiscarded = options.onNodeDiscarded || noop;\n    var onBeforeElChildrenUpdated = options.onBeforeElChildrenUpdated || noop;\n    var skipFromChildren = options.skipFromChildren || noop;\n    var addChild = options.addChild || function(parent, child){ return parent.appendChild(child); };\n    var childrenOnly = options.childrenOnly === true;\n\n    // This object is used as a lookup to quickly find all keyed elements in the original DOM tree.\n    var fromNodesLookup = Object.create(null);\n    var keyedRemovalList = [];\n\n    function addKeyedRemoval(key) {\n      keyedRemovalList.push(key);\n    }\n\n    function walkDiscardedChildNodes(node, skipKeyedNodes) {\n      if (node.nodeType === ELEMENT_NODE) {\n        var curChild = node.firstChild;\n        while (curChild) {\n\n          var key = undefined;\n\n          if (skipKeyedNodes && (key = getNodeKey(curChild))) {\n            // If we are skipping keyed nodes then we add the key\n            // to a list so that it can be handled at the very end.\n            addKeyedRemoval(key);\n          } else {\n            // Only report the node as discarded if it is not keyed. We do this because\n            // at the end we loop through all keyed elements that were unmatched\n            // and then discard them in one final pass.\n            onNodeDiscarded(curChild);\n            if (curChild.firstChild) {\n              walkDiscardedChildNodes(curChild, skipKeyedNodes);\n            }\n          }\n\n          curChild = curChild.nextSibling;\n        }\n      }\n    }\n\n    /**\n    * Removes a DOM node out of the original DOM\n    *\n    * @param  {Node} node The node to remove\n    * @param  {Node} parentNode The nodes parent\n    * @param  {Boolean} skipKeyedNodes If true then elements with keys will be skipped and not discarded.\n    * @return {undefined}\n    */\n    function removeNode(node, parentNode, skipKeyedNodes) {\n      if (onBeforeNodeDiscarded(node) === false) {\n        return;\n      }\n\n      if (parentNode) {\n        parentNode.removeChild(node);\n      }\n\n      onNodeDiscarded(node);\n      walkDiscardedChildNodes(node, skipKeyedNodes);\n    }\n\n    // // TreeWalker implementation is no faster, but keeping this around in case this changes in the future\n    // function indexTree(root) {\n    //     var treeWalker = document.createTreeWalker(\n    //         root,\n    //         NodeFilter.SHOW_ELEMENT);\n    //\n    //     var el;\n    //     while((el = treeWalker.nextNode())) {\n    //         var key = getNodeKey(el);\n    //         if (key) {\n    //             fromNodesLookup[key] = el;\n    //         }\n    //     }\n    // }\n\n    // // NodeIterator implementation is no faster, but keeping this around in case this changes in the future\n    //\n    // function indexTree(node) {\n    //     var nodeIterator = document.createNodeIterator(node, NodeFilter.SHOW_ELEMENT);\n    //     var el;\n    //     while((el = nodeIterator.nextNode())) {\n    //         var key = getNodeKey(el);\n    //         if (key) {\n    //             fromNodesLookup[key] = el;\n    //         }\n    //     }\n    // }\n\n    function indexTree(node) {\n      if (node.nodeType === ELEMENT_NODE || node.nodeType === DOCUMENT_FRAGMENT_NODE$1) {\n        var curChild = node.firstChild;\n        while (curChild) {\n          var key = getNodeKey(curChild);\n          if (key) {\n            fromNodesLookup[key] = curChild;\n          }\n\n          // Walk recursively\n          indexTree(curChild);\n\n          curChild = curChild.nextSibling;\n        }\n      }\n    }\n\n    indexTree(fromNode);\n\n    function handleNodeAdded(el) {\n      onNodeAdded(el);\n\n      var curChild = el.firstChild;\n      while (curChild) {\n        var nextSibling = curChild.nextSibling;\n\n        var key = getNodeKey(curChild);\n        if (key) {\n          var unmatchedFromEl = fromNodesLookup[key];\n          // if we find a duplicate #id node in cache, replace `el` with cache value\n          // and morph it to the child node.\n          if (unmatchedFromEl && compareNodeNames(curChild, unmatchedFromEl)) {\n            curChild.parentNode.replaceChild(unmatchedFromEl, curChild);\n            morphEl(unmatchedFromEl, curChild);\n          } else {\n            handleNodeAdded(curChild);\n          }\n        } else {\n          // recursively call for curChild and it's children to see if we find something in\n          // fromNodesLookup\n          handleNodeAdded(curChild);\n        }\n\n        curChild = nextSibling;\n      }\n    }\n\n    function cleanupFromEl(fromEl, curFromNodeChild, curFromNodeKey) {\n      // We have processed all of the \"to nodes\". If curFromNodeChild is\n      // non-null then we still have some from nodes left over that need\n      // to be removed\n      while (curFromNodeChild) {\n        var fromNextSibling = curFromNodeChild.nextSibling;\n        if ((curFromNodeKey = getNodeKey(curFromNodeChild))) {\n          // Since the node is keyed it might be matched up later so we defer\n          // the actual removal to later\n          addKeyedRemoval(curFromNodeKey);\n        } else {\n          // NOTE: we skip nested keyed nodes from being removed since there is\n          //       still a chance they will be matched up later\n          removeNode(curFromNodeChild, fromEl, true /* skip keyed nodes */);\n        }\n        curFromNodeChild = fromNextSibling;\n      }\n    }\n\n    function morphEl(fromEl, toEl, childrenOnly) {\n      var toElKey = getNodeKey(toEl);\n\n      if (toElKey) {\n        // If an element with an ID is being morphed then it will be in the final\n        // DOM so clear it out of the saved elements collection\n        delete fromNodesLookup[toElKey];\n      }\n\n      if (!childrenOnly) {\n        // optional\n        var beforeUpdateResult = onBeforeElUpdated(fromEl, toEl);\n        if (beforeUpdateResult === false) {\n          return;\n        } else if (beforeUpdateResult instanceof HTMLElement) {\n          fromEl = beforeUpdateResult;\n          // reindex the new fromEl in case it's not in the same\n          // tree as the original fromEl\n          // (Phoenix LiveView sometimes returns a cloned tree,\n          //  but keyed lookups would still point to the original tree)\n          indexTree(fromEl);\n        }\n\n        // update attributes on original DOM element first\n        morphAttrs(fromEl, toEl);\n        // optional\n        onElUpdated(fromEl);\n\n        if (onBeforeElChildrenUpdated(fromEl, toEl) === false) {\n          return;\n        }\n      }\n\n      if (fromEl.nodeName !== 'TEXTAREA') {\n        morphChildren(fromEl, toEl);\n      } else {\n        specialElHandlers.TEXTAREA(fromEl, toEl);\n      }\n    }\n\n    function morphChildren(fromEl, toEl) {\n      var skipFrom = skipFromChildren(fromEl, toEl);\n      var curToNodeChild = toEl.firstChild;\n      var curFromNodeChild = fromEl.firstChild;\n      var curToNodeKey;\n      var curFromNodeKey;\n\n      var fromNextSibling;\n      var toNextSibling;\n      var matchingFromEl;\n\n      // walk the children\n      outer: while (curToNodeChild) {\n        toNextSibling = curToNodeChild.nextSibling;\n        curToNodeKey = getNodeKey(curToNodeChild);\n\n        // walk the fromNode children all the way through\n        while (!skipFrom && curFromNodeChild) {\n          fromNextSibling = curFromNodeChild.nextSibling;\n\n          if (curToNodeChild.isSameNode && curToNodeChild.isSameNode(curFromNodeChild)) {\n            curToNodeChild = toNextSibling;\n            curFromNodeChild = fromNextSibling;\n            continue outer;\n          }\n\n          curFromNodeKey = getNodeKey(curFromNodeChild);\n\n          var curFromNodeType = curFromNodeChild.nodeType;\n\n          // this means if the curFromNodeChild doesnt have a match with the curToNodeChild\n          var isCompatible = undefined;\n\n          if (curFromNodeType === curToNodeChild.nodeType) {\n            if (curFromNodeType === ELEMENT_NODE) {\n              // Both nodes being compared are Element nodes\n\n              if (curToNodeKey) {\n                // The target node has a key so we want to match it up with the correct element\n                // in the original DOM tree\n                if (curToNodeKey !== curFromNodeKey) {\n                  // The current element in the original DOM tree does not have a matching key so\n                  // let's check our lookup to see if there is a matching element in the original\n                  // DOM tree\n                  if ((matchingFromEl = fromNodesLookup[curToNodeKey])) {\n                    if (fromNextSibling === matchingFromEl) {\n                      // Special case for single element removals. To avoid removing the original\n                      // DOM node out of the tree (since that can break CSS transitions, etc.),\n                      // we will instead discard the current node and wait until the next\n                      // iteration to properly match up the keyed target element with its matching\n                      // element in the original tree\n                      isCompatible = false;\n                    } else {\n                      // We found a matching keyed element somewhere in the original DOM tree.\n                      // Let's move the original DOM node into the current position and morph\n                      // it.\n\n                      // NOTE: We use insertBefore instead of replaceChild because we want to go through\n                      // the `removeNode()` function for the node that is being discarded so that\n                      // all lifecycle hooks are correctly invoked\n                      fromEl.insertBefore(matchingFromEl, curFromNodeChild);\n\n                      // fromNextSibling = curFromNodeChild.nextSibling;\n\n                      if (curFromNodeKey) {\n                        // Since the node is keyed it might be matched up later so we defer\n                        // the actual removal to later\n                        addKeyedRemoval(curFromNodeKey);\n                      } else {\n                        // NOTE: we skip nested keyed nodes from being removed since there is\n                        //       still a chance they will be matched up later\n                        removeNode(curFromNodeChild, fromEl, true /* skip keyed nodes */);\n                      }\n\n                      curFromNodeChild = matchingFromEl;\n                      curFromNodeKey = getNodeKey(curFromNodeChild);\n                    }\n                  } else {\n                    // The nodes are not compatible since the \"to\" node has a key and there\n                    // is no matching keyed node in the source tree\n                    isCompatible = false;\n                  }\n                }\n              } else if (curFromNodeKey) {\n                // The original has a key\n                isCompatible = false;\n              }\n\n              isCompatible = isCompatible !== false && compareNodeNames(curFromNodeChild, curToNodeChild);\n              if (isCompatible) {\n                // We found compatible DOM elements so transform\n                // the current \"from\" node to match the current\n                // target DOM node.\n                // MORPH\n                morphEl(curFromNodeChild, curToNodeChild);\n              }\n\n            } else if (curFromNodeType === TEXT_NODE || curFromNodeType == COMMENT_NODE) {\n              // Both nodes being compared are Text or Comment nodes\n              isCompatible = true;\n              // Simply update nodeValue on the original node to\n              // change the text value\n              if (curFromNodeChild.nodeValue !== curToNodeChild.nodeValue) {\n                curFromNodeChild.nodeValue = curToNodeChild.nodeValue;\n              }\n\n            }\n          }\n\n          if (isCompatible) {\n            // Advance both the \"to\" child and the \"from\" child since we found a match\n            // Nothing else to do as we already recursively called morphChildren above\n            curToNodeChild = toNextSibling;\n            curFromNodeChild = fromNextSibling;\n            continue outer;\n          }\n\n          // No compatible match so remove the old node from the DOM and continue trying to find a\n          // match in the original DOM. However, we only do this if the from node is not keyed\n          // since it is possible that a keyed node might match up with a node somewhere else in the\n          // target tree and we don't want to discard it just yet since it still might find a\n          // home in the final DOM tree. After everything is done we will remove any keyed nodes\n          // that didn't find a home\n          if (curFromNodeKey) {\n            // Since the node is keyed it might be matched up later so we defer\n            // the actual removal to later\n            addKeyedRemoval(curFromNodeKey);\n          } else {\n            // NOTE: we skip nested keyed nodes from being removed since there is\n            //       still a chance they will be matched up later\n            removeNode(curFromNodeChild, fromEl, true /* skip keyed nodes */);\n          }\n\n          curFromNodeChild = fromNextSibling;\n        } // END: while(curFromNodeChild) {}\n\n        // If we got this far then we did not find a candidate match for\n        // our \"to node\" and we exhausted all of the children \"from\"\n        // nodes. Therefore, we will just append the current \"to\" node\n        // to the end\n        if (curToNodeKey && (matchingFromEl = fromNodesLookup[curToNodeKey]) && compareNodeNames(matchingFromEl, curToNodeChild)) {\n          // MORPH\n          if(!skipFrom){ addChild(fromEl, matchingFromEl); }\n          morphEl(matchingFromEl, curToNodeChild);\n        } else {\n          var onBeforeNodeAddedResult = onBeforeNodeAdded(curToNodeChild);\n          if (onBeforeNodeAddedResult !== false) {\n            if (onBeforeNodeAddedResult) {\n              curToNodeChild = onBeforeNodeAddedResult;\n            }\n\n            if (curToNodeChild.actualize) {\n              curToNodeChild = curToNodeChild.actualize(fromEl.ownerDocument || doc);\n            }\n            addChild(fromEl, curToNodeChild);\n            handleNodeAdded(curToNodeChild);\n          }\n        }\n\n        curToNodeChild = toNextSibling;\n        curFromNodeChild = fromNextSibling;\n      }\n\n      cleanupFromEl(fromEl, curFromNodeChild, curFromNodeKey);\n\n      var specialElHandler = specialElHandlers[fromEl.nodeName];\n      if (specialElHandler) {\n        specialElHandler(fromEl, toEl);\n      }\n    } // END: morphChildren(...)\n\n    var morphedNode = fromNode;\n    var morphedNodeType = morphedNode.nodeType;\n    var toNodeType = toNode.nodeType;\n\n    if (!childrenOnly) {\n      // Handle the case where we are given two DOM nodes that are not\n      // compatible (e.g. <div> --> <span> or <div> --> TEXT)\n      if (morphedNodeType === ELEMENT_NODE) {\n        if (toNodeType === ELEMENT_NODE) {\n          if (!compareNodeNames(fromNode, toNode)) {\n            onNodeDiscarded(fromNode);\n            morphedNode = moveChildren(fromNode, createElementNS(toNode.nodeName, toNode.namespaceURI));\n          }\n        } else {\n          // Going from an element node to a text node\n          morphedNode = toNode;\n        }\n      } else if (morphedNodeType === TEXT_NODE || morphedNodeType === COMMENT_NODE) { // Text or comment node\n        if (toNodeType === morphedNodeType) {\n          if (morphedNode.nodeValue !== toNode.nodeValue) {\n            morphedNode.nodeValue = toNode.nodeValue;\n          }\n\n          return morphedNode;\n        } else {\n          // Text node to something else\n          morphedNode = toNode;\n        }\n      }\n    }\n\n    if (morphedNode === toNode) {\n      // The \"to node\" was not compatible with the \"from node\" so we had to\n      // toss out the \"from node\" and use the \"to node\"\n      onNodeDiscarded(fromNode);\n    } else {\n      if (toNode.isSameNode && toNode.isSameNode(morphedNode)) {\n        return;\n      }\n\n      morphEl(morphedNode, toNode, childrenOnly);\n\n      // We now need to loop over any keyed nodes that might need to be\n      // removed. We only do the removal if we know that the keyed node\n      // never found a match. When a keyed node is matched up we remove\n      // it out of fromNodesLookup and we use fromNodesLookup to determine\n      // if a keyed node has been matched up or not\n      if (keyedRemovalList) {\n        for (var i=0, len=keyedRemovalList.length; i<len; i++) {\n          var elToRemove = fromNodesLookup[keyedRemovalList[i]];\n          if (elToRemove) {\n            removeNode(elToRemove, elToRemove.parentNode, false);\n          }\n        }\n      }\n    }\n\n    if (!childrenOnly && morphedNode !== fromNode && fromNode.parentNode) {\n      if (morphedNode.actualize) {\n        morphedNode = morphedNode.actualize(fromNode.ownerDocument || doc);\n      }\n      // If we had to swap out the from node with a new node because the old\n      // node was not compatible with the target node then we need to\n      // replace the old DOM node in the original DOM tree. This is only\n      // possible if the original DOM node was part of a DOM tree which\n      // we know is the case if it has a parent node.\n      fromNode.parentNode.replaceChild(morphedNode, fromNode);\n    }\n\n    return morphedNode;\n  };\n}\n\nvar morphdom = morphdomFactory(morphAttrs);\n\nexport default morphdom;\n","import { ComponentObject, StateObject, StateValueType } from \"../types/StateObjectTypes\";\r\nimport RuntimeManager from \"./RuntimeManager\";\r\nimport { EventObject } from \"../types/RuntimeInterfaces\";\r\nimport { utf8ToBase64 } from \"../utils/baseConverter\";\r\nimport morphdom from \"morphdom\";\r\n\r\nexport default class AppManager {\r\n   /**\r\n    * Navigates to a given URL using PHPSPA's custom navigation logic.\r\n    * Fetches the content via a custom HTTP method, updates the DOM, manages browser history,\r\n    * emits lifecycle events, and executes inline scripts.\r\n    *\r\n    * @param url - The URL or path to navigate to.\r\n    * @param state Determines whether to push or replace the browser history state.\r\n    *\r\n    * @fires AppManager#beforeload - Emitted before loading the new route.\r\n    * @fires AppManager#load - Emitted after attempting to load the new route, with success or error status.\r\n    */\r\n   public static navigate(url: URL|string, state: 'push' | 'replace' = \"push\") {\r\n      const newUrl = url instanceof URL ? url : new URL(url, location.toString());\r\n\r\n      // --- Emit beforeload event for loading indicators ---\r\n      RuntimeManager.emit(\"beforeload\", { route: newUrl.toString() });\r\n\r\n      // --- Fetch content from the server with PhpSPA headers ---\r\n      fetch(newUrl, {\r\n         headers: {\r\n            \"X-Requested-With\": \"PHPSPA_REQUEST\",\r\n            \"X-Phpspa-Target\": \"navigate\",\r\n         },\r\n         mode: \"same-origin\",\r\n         redirect: \"follow\",\r\n         keepalive: true,\r\n      })\r\n         .then((response) => {\r\n            response\r\n               .text()\r\n               .then((responseText) => {\r\n                  let responseData;\r\n\r\n                  // --- Try to parse JSON response, fallback to raw text ---\r\n                  if (responseText && responseText.trim().startsWith(\"{\")) {\r\n                     try {\r\n                        responseData = JSON.parse(responseText);\r\n                     } catch (parseError) {\r\n                        responseData = responseText;\r\n                     }\r\n                  } else {\r\n                     responseData = responseText || \"\"; // --- Handle empty responses ---\r\n                  }\r\n\r\n                  processResponse(responseData);\r\n               })\r\n               .catch((error) => handleError(error));\r\n         })\r\n         .catch((error) => handleError(error));\r\n\r\n      /**\r\n       * Handles errors that occur during navigation requests\r\n       * @param {Error} error - The error object from the failed request\r\n       */\r\n      function handleError(error: any) {\r\n         // --- Check if the error has a response body (HTTP 4xx/5xx errors) ---\r\n         if (error.response) {\r\n            error.response\r\n               .text()\r\n               .then((fallbackResponse: any) => {\r\n                  let errorData;\r\n\r\n                  try {\r\n                     // --- Attempt to parse error response as JSON ---\r\n                     errorData = fallbackResponse?.trim().startsWith(\"{\")\r\n                        ? JSON.parse(fallbackResponse)\r\n                        : fallbackResponse;\r\n                  } catch (parseError) {\r\n                     // --- If parsing fails, use raw text ---\r\n                     errorData = fallbackResponse;\r\n                  }\r\n\r\n                  processResponse(errorData || \"\");\r\n\r\n                  RuntimeManager.emit(\"load\", {\r\n                     route: newUrl.toString(),\r\n                     success: false,\r\n                     error: error.message || \"Server returned an error\",\r\n                     data: errorData,\r\n                  });\r\n               })\r\n               .catch(() => {\r\n                  processResponse(\"\");\r\n\r\n                  // --- Failed to read error response body ---\r\n                  RuntimeManager.emit(\"load\", {\r\n                     route: newUrl.toString(),\r\n                     success: false,\r\n                     error: error.message || \"Failed to read error response\",\r\n                  });\r\n               });\r\n         } else {\r\n            processResponse(\"\");\r\n\r\n            // --- Network error, same-origin issue, or other connection problems ---\r\n            RuntimeManager.emit(\"load\", {\r\n               route: newUrl.toString(),\r\n               success: false,\r\n               error: error.message || \"No connection to server\",\r\n            });\r\n         }\r\n      }\r\n\r\n      /**\r\n       * Processes the server response and updates the DOM\r\n       */\r\n      function processResponse(responseData: ComponentObject|string) {\r\n         const component: ComponentObject = typeof responseData === 'string'\r\n            ? { content: responseData }\r\n            : responseData;\r\n\r\n         // --- Update document title if provided ---\r\n         if (component?.title && component.title.length > 0) {\r\n            document.title = component.title;\r\n         }\r\n\r\n         // --- Find target element for content replacement ---\r\n         const targetElement =\r\n            document.getElementById(component?.targetID) ??\r\n            document.getElementById(history.state?.targetID) ??\r\n            document.body;\r\n\r\n         if (component?.targetID) {\r\n            RuntimeManager.currentRoutes[component.targetID] = {\r\n               route: newUrl,\r\n               exact: component.exact ?? false,\r\n               defaultContent: RuntimeManager.currentRoutes[component.targetID]?.defaultContent ?? targetElement.innerHTML\r\n            }\r\n         }\r\n\r\n         const currentRoutes = RuntimeManager.currentRoutes;\r\n\r\n         for (const targetID in currentRoutes) {\r\n            if (!Object.hasOwn(currentRoutes, targetID)) continue;\r\n\r\n            const targetInfo = currentRoutes[targetID];\r\n\r\n            // --- If route is exact and the route target ID is not equal to the navigated route target ID ---\r\n            // --- Then the document URL has changed ---\r\n            // --- That is they are navigating away ---\r\n            // --- And any route with exact === true must go back to its default content ---\r\n            if (targetInfo.exact === true && targetID !== component?.targetID) {\r\n               let currentHTML = document.getElementById(targetID)\r\n               if (currentHTML) {\r\n                  try {\r\n                     morphdom(currentHTML, '<div>' + targetInfo.defaultContent + '</div>', {\r\n                        childrenOnly: true\r\n                     });\r\n                  } catch {\r\n                     currentHTML.innerHTML = targetInfo.defaultContent;\r\n                  }\r\n               }\r\n\r\n               delete currentRoutes[targetID];\r\n            }\r\n         }\r\n\r\n         // --- Update content ---\r\n         const updateDOM = () => {\r\n            try {\r\n               morphdom(targetElement, '<div>' + component.content + '</div>', {\r\n                  childrenOnly: true\r\n               });\r\n            } catch {\r\n               targetElement.innerHTML = component.content;\r\n            }\r\n         }\r\n\r\n\r\n         const stateData: StateObject = {\r\n            url: newUrl.toString(),\r\n            title: component?.title ?? document.title,\r\n            targetID: targetElement.id,\r\n            content: component.content,\r\n            exact: currentRoutes[component?.targetID]?.exact,\r\n            defaultContent: currentRoutes[component?.targetID]?.defaultContent,\r\n         }\r\n\r\n         // --- Include reload time if specified ---\r\n         if (component?.reloadTime) {\r\n            stateData.reloadTime = component.reloadTime;\r\n         }\r\n\r\n         const completedDOMUpdate = () => {\r\n\r\n            // --- Update browser history ---\r\n            if (state === \"push\") {\r\n               RuntimeManager.pushState(stateData, stateData.title, newUrl);\r\n            } else if (state === \"replace\") {\r\n               RuntimeManager.replaceState(stateData, stateData.title, newUrl);\r\n            }\r\n\r\n            // --- Handle URL fragments (hash navigation) ---\r\n            const hashElement = document.getElementById(newUrl.hash.substring(1));\r\n\r\n            if (hashElement) {\r\n               scroll({\r\n                  top: hashElement.offsetTop,\r\n                  left: hashElement.offsetLeft,\r\n               });\r\n            } else {\r\n               scroll(0, 0); // --- Scroll to top if no hash or element not found ---\r\n            }\r\n\r\n\r\n            // --- Clear old executed scripts cache ---\r\n            RuntimeManager.clearEffects();\r\n            RuntimeManager.clearExecutedScripts();\r\n\r\n            // --- Execute any inline scripts and styles in the new content ---\r\n            RuntimeManager.runAll();\r\n\r\n            // --- Emit successful load event ---\r\n            RuntimeManager.emit(\"load\", {\r\n               route: newUrl.toString(),\r\n               success: true,\r\n               error: false,\r\n            });\r\n\r\n            // --- Set up auto-reload if specified ---\r\n            if (component?.reloadTime) {\r\n               setTimeout(AppManager.reloadComponent, component.reloadTime);\r\n            }\r\n         }\r\n\r\n         if (document.startViewTransition) {\r\n            document.startViewTransition(updateDOM).finished.then(completedDOMUpdate).catch((reason) => {\r\n               RuntimeManager.emit('load', {\r\n                  route: newUrl.toString(),\r\n                  success: false,\r\n                  error: reason || 'Unknown error during view transition',\r\n               });\r\n            });\r\n         } else {\r\n            updateDOM();\r\n            completedDOMUpdate();\r\n         }\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Navigates back in the browser history.\r\n    * Uses the native browser history API.\r\n    */\r\n   public static back() {\r\n      history.back();\r\n   }\r\n\r\n   /**\r\n    * Navigates forward in the browser's session history.\r\n    * Uses the native browser history API.\r\n    */\r\n   public static forward() {\r\n      history.forward();\r\n   }\r\n\r\n   /**\r\n    * Reloads the current page by navigating to the current URL using the \"replace\" history mode.\r\n    * This does not add a new entry to the browser's history stack.\r\n    */\r\n   public static reload() {\r\n      AppManager.navigate(location.toString(), \"replace\");\r\n   }\r\n\r\n   /**\r\n    * Registers a callback function to be executed when the specified event is triggered.\r\n    *\r\n    * @param event - The name of the event to listen for.\r\n    * @param callback - The function to call when the event is triggered.\r\n    */\r\n   public static on(event: keyof EventObject, callback: () => void) {\r\n      if (!RuntimeManager.events[event]) {\r\n         RuntimeManager.events[event] = [];\r\n      }\r\n      RuntimeManager.events[event].push(callback);\r\n   }\r\n\r\n   /**\r\n    * Registers a side effect to be executed after component updates.\r\n    * Alias for RuntimeManager.registerEffect.\r\n    * \r\n    * @param callback - The effect callback\r\n    * @param dependencies - Array of state keys to listen for\r\n    */\r\n   public static useEffect(callback: () => Function|undefined, dependencies: string[]|null = null) {\r\n      RuntimeManager.registerEffect(callback, dependencies);\r\n   }\r\n\r\n   /**\r\n    * Updates the application state by sending a custom fetch request and updating the DOM accordingly.\r\n    * Preserves the current scroll position during the update.\r\n    *\r\n    * @param key - The key representing the state to update.\r\n    * @param value - The new value to set for the specified state key.\r\n    * @returns A promise that resolves when the state is updated successfully.\r\n    *\r\n    * @example\r\n    * AppManager.setState('user', { name: 'Alice' })\r\n    *   .then(() => console.log('State updated!'))\r\n    *   .catch(err => console.error('Failed to update state:', err));\r\n    */\r\n   public static setState(key: string, value: StateValueType): Promise<void> {\r\n      return new Promise(async (resolve, reject) => {\r\n         const currentRoutes = RuntimeManager.currentRoutes;\r\n         const statePayload = JSON.stringify({ state: { key, value } });\r\n         const promises = [];\r\n\r\n         for (const targetID in currentRoutes) {\r\n            if (!Object.hasOwn(currentRoutes, targetID)) continue;\r\n\r\n            const { route } = currentRoutes[targetID];\r\n\r\n            const prom = fetch(route, {\r\n               headers: {\r\n                  \"X-Requested-With\": \"PHPSPA_REQUEST\",\r\n                  Authorization: `Bearer ${utf8ToBase64(statePayload)}`,\r\n               },\r\n               mode: \"same-origin\",\r\n               redirect: \"follow\",\r\n               keepalive: true,\r\n            });\r\n            promises.push(prom);\r\n         }\r\n\r\n         const responses = await Promise.all(promises);\r\n\r\n         responses.forEach(async (response) => {\r\n            try {\r\n               const responseText = await response.text();\r\n               let responseData;\r\n\r\n               // --- Parse response as JSON if possible ---\r\n               if (responseText && responseText.trim().startsWith(\"{\")) {\r\n                  try {\r\n                     responseData = JSON.parse(responseText);\r\n                  } catch (parseError) {\r\n                     responseData = responseText;\r\n                  }\r\n               } else {\r\n                  responseData = responseText || \"\";\r\n               }\r\n\r\n               resolve();\r\n               updateContent(responseData);\r\n            } catch (error) {\r\n               reject(error);\r\n               handleStateError(error);\r\n            }\r\n         });\r\n\r\n\r\n         /**\r\n          * Handles errors during state update requests\r\n          */\r\n         function handleStateError(error: any) {\r\n            if (error?.response) {\r\n               error.response\r\n                  .text()\r\n                  .then((fallbackResponse: any) => {\r\n                     let errorData;\r\n\r\n                     try {\r\n                        errorData = fallbackResponse?.trim().startsWith(\"{\")\r\n                           ? JSON.parse(fallbackResponse)\r\n                           : fallbackResponse;\r\n                     } catch (parseError) {\r\n                        errorData = fallbackResponse;\r\n                     }\r\n\r\n                     updateContent(errorData || \"\");\r\n                  })\r\n                  .catch(() => {\r\n                     updateContent(\"\");\r\n                  });\r\n            } else {\r\n               updateContent(\"\");\r\n            }\r\n         }\r\n\r\n         /**\r\n          * Updates the DOM content and restores scroll position\r\n          * @param {string|Object} responseData - The response data to process\r\n          */\r\n         function updateContent(responseData: ComponentObject|string) {\r\n         const component: ComponentObject = typeof responseData === 'string'\r\n            ? { content: responseData }\r\n            : responseData;\r\n   \r\n            // --- Update title if provided ---\r\n            if (component?.title && String(component.title).length > 0) {\r\n               document.title = component.title;\r\n            }\r\n\r\n            // --- Find target element and update content ---\r\n            const targetElement =\r\n               document.getElementById(component?.targetID) ??\r\n               document.getElementById(history.state?.targetID) ??\r\n               document.body;\r\n\r\n            const updateDOM = () => {\r\n               try {\r\n                  morphdom(targetElement, '<div>' + component.content + '</div>', {\r\n                     childrenOnly: true\r\n                  });\r\n               } catch {\r\n                  targetElement.innerHTML = component.content;\r\n               }\r\n            };\r\n\r\n            const completedDOMUpdate = () => {\r\n               // --- Trigger effects for the changed key ---\r\n               RuntimeManager.triggerEffects(key, value);\r\n            };\r\n\r\n            updateDOM();\r\n            completedDOMUpdate();\r\n         }\r\n      });\r\n   }\r\n\r\n   /**\r\n    * Reloads the current component content while preserving scroll position.\r\n    * Useful for refreshing dynamic content without full page navigation.\r\n    */\r\n   static reloadComponent() {\r\n\r\n      // --- Fetch current page content ---\r\n      fetch(location.toString(), {\r\n         headers: {\r\n            \"X-Requested-With\": \"PHPSPA_REQUEST\",\r\n         },\r\n         mode: \"same-origin\",\r\n         redirect: \"follow\",\r\n         keepalive: true,\r\n      })\r\n         .then((response) => {\r\n            response\r\n               .text()\r\n               .then((responseText) => {\r\n                  let responseData;\r\n\r\n                  // --- Parse response ---\r\n                  if (responseText && responseText.trim().startsWith(\"{\")) {\r\n                     try {\r\n                        responseData = JSON.parse(responseText);\r\n                     } catch (parseError) {\r\n                        responseData = responseText;\r\n                     }\r\n                  } else {\r\n                     responseData = responseText || \"\";\r\n                  }\r\n\r\n                  updateComponentContent(responseData);\r\n               })\r\n               .catch((error) => {\r\n                  handleComponentError(error);\r\n               });\r\n         })\r\n         .catch((error) => {\r\n            handleComponentError(error);\r\n         });\r\n\r\n      /**\r\n       * Handles errors during component reload\r\n       */\r\n      function handleComponentError(error: any) {\r\n         if (error?.response) {\r\n            error.response\r\n               .text()\r\n               .then((fallbackResponse: string) => {\r\n                  let errorData;\r\n\r\n                  try {\r\n                     errorData = fallbackResponse?.trim().startsWith(\"{\")\r\n                        ? JSON.parse(fallbackResponse)\r\n                        : fallbackResponse;\r\n                  } catch (parseError) {\r\n                     errorData = fallbackResponse;\r\n                  }\r\n\r\n                  updateComponentContent(errorData || \"\");\r\n               })\r\n               .catch(() => {\r\n                  updateComponentContent(\"\");\r\n               });\r\n         } else {\r\n            updateComponentContent(\"\");\r\n         }\r\n      }\r\n\r\n      /**\r\n       * Updates the component content and handles auto-reload\r\n       */\r\n      function updateComponentContent(responseData: ComponentObject|string) {\r\n         const component: ComponentObject = typeof responseData === 'string'\r\n            ? { content: responseData }\r\n            : responseData;\r\n\r\n         // --- Update title if provided ---\r\n         if (component?.title && String(component.title).length > 0) {\r\n            document.title = component.title;\r\n         }\r\n\r\n         // --- Find target and update content ---\r\n         const targetElement =\r\n            document.getElementById(component?.targetID) ??\r\n            document.getElementById(history.state?.targetID) ??\r\n            document.body;\r\n\r\n         const updateDOM = () => {\r\n            try {\r\n               morphdom(targetElement, '<div>' + component.content + '</div>', {\r\n                  childrenOnly: true\r\n               });\r\n            } catch {\r\n               targetElement.innerHTML = component.content;\r\n            }\r\n         };\r\n\r\n         const completedDOMUpdate = () => {\r\n            // --- Clear old executed scripts cache ---\r\n            RuntimeManager.clearEffects();\r\n            RuntimeManager.clearExecutedScripts();\r\n\r\n            // --- Execute any inline scripts and styles in the new content ---\r\n            RuntimeManager.runAll();\r\n\r\n            // --- Set up next auto-reload if specified ---\r\n            if (component?.reloadTime) {\r\n               setTimeout(AppManager.reloadComponent, component.reloadTime);\r\n            }\r\n         }\r\n\r\n         updateDOM();\r\n         completedDOMUpdate();\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Makes an authenticated call to the server with a token and arguments.\r\n    * Used for server-side function calls from the client.\r\n    *\r\n    * @param token - The authentication token for the call\r\n    * @param args - Arguments to pass to the server function\r\n    * @returns The decoded response from the server\r\n    */\r\n   public static async __call(token: string, ...args: any[]): Promise<StateValueType> {\r\n      const callPayload = JSON.stringify({ __call: { token, args } });\r\n\r\n      try {\r\n         const response = await fetch(location.pathname, {\r\n            headers: {\r\n               \"X-Requested-With\": \"PHPSPA_REQUEST\",\r\n               Authorization: `Bearer ${utf8ToBase64(callPayload)}`,\r\n            },\r\n            mode: \"same-origin\",\r\n            redirect: \"follow\",\r\n            keepalive: true,\r\n         });\r\n\r\n         const responseText = await response.text();\r\n         let responseData;\r\n\r\n         // --- Parse and decode response ---\r\n         if (responseText && responseText.trim().startsWith(\"{\")) {\r\n            try {\r\n               responseData = JSON.parse(responseText);\r\n               responseData = responseData?.response\r\n                  ? JSON.parse(responseData.response)\r\n                  : responseData;\r\n            } catch (parseError) {\r\n               responseData = responseText;\r\n            }\r\n         } else {\r\n            responseData = responseText || \"\";\r\n         }\r\n\r\n         return responseData;\r\n      } catch (error: any) {\r\n         // --- Handle errors with response bodies ---\r\n         if (error?.response) {\r\n            try {\r\n               const fallbackResponse = await error.response.text();\r\n               let errorData;\r\n\r\n               try {\r\n                  errorData = fallbackResponse?.trim().startsWith(\"{\")\r\n                     ? JSON.parse(fallbackResponse)\r\n                     : fallbackResponse;\r\n\r\n                  errorData = errorData?.response\r\n                     ? JSON.parse(errorData.response)\r\n                     : errorData;\r\n               } catch (parseError) {\r\n                  errorData = fallbackResponse;\r\n               }\r\n\r\n               return errorData;\r\n            } catch {\r\n               return \"\";\r\n            }\r\n         } else {\r\n            // --- Network errors or other issues ---\r\n            return \"\";\r\n         }\r\n      }\r\n   }\r\n}","import AppManager from \"./core/AppManager\";\r\nimport RuntimeManager from \"./core/RuntimeManager\";\r\nimport { StateObject } from \"./types/StateObjectTypes\";\r\nimport { base64ToUtf8 } from \"./utils/baseConverter\";\r\nimport morphdom from \"morphdom\";\r\n\r\ndeclare global {\r\n   export interface Window {\r\n      phpspa: typeof AppManager;\r\n      setState: typeof AppManager.setState;\r\n      useEffect: typeof AppManager.useEffect;\r\n      __call: typeof AppManager.__call;\r\n   }\r\n}\r\n\r\n/**\r\n * Initialize PhpSPA when DOM is ready\r\n * Sets up the initial browser history state with the current page content\r\n */\r\nwindow.addEventListener(\"DOMContentLoaded\", () => {\r\n   const targetElement = document.querySelector(\"[data-phpspa-target]\");\r\n   const targetElementInfo = document.querySelector(\"[phpspa-target-data]\");\r\n   const uri = location.toString();\r\n\r\n   RuntimeManager.emit('load', {\r\n      route: uri,\r\n      success: true,\r\n      error: false\r\n   });\r\n\r\n   if (targetElement) {\r\n      /**\r\n       *  Create initial state object with current page data\r\n       */\r\n      const initialState: StateObject = {\r\n         url: uri,\r\n         title: document.title,\r\n         targetID: targetElement.id,\r\n         content: targetElement.innerHTML,\r\n         root: true,\r\n      };\r\n\r\n      // --- Check if component has auto-reload functionality ---\r\n      if (targetElement.hasAttribute(\"phpspa-reload-time\")) {\r\n         initialState.reloadTime = Number(\r\n            targetElement.getAttribute(\"phpspa-reload-time\")\r\n         );\r\n      }\r\n\r\n      // --- Check if component has target info ---\r\n      if (targetElementInfo) {\r\n         const targetData = targetElementInfo.getAttribute(\"phpspa-target-data\");\r\n\r\n         // --- This is the json type coming from the server\r\n         type StateDataType = {\r\n            targetIDs: string[],\r\n            currentRoutes: string[],\r\n            defaultContent: string[],\r\n            exact: boolean[],\r\n         }\r\n\r\n         const targetDataInfo: StateDataType = JSON.parse(base64ToUtf8(targetData ?? ''));\r\n\r\n         targetDataInfo.targetIDs.forEach((targetID: string, index: number) => {\r\n            const exact = targetDataInfo.exact[index];\r\n            const defaultContent = targetDataInfo.defaultContent[index];\r\n\r\n            if (targetID === targetElement.id) {\r\n               initialState['exact'] = exact;\r\n               initialState['defaultContent'] = defaultContent;\r\n            }\r\n\r\n            RuntimeManager.currentRoutes[targetID] = {\r\n               route: new URL(targetDataInfo.currentRoutes[index], uri),\r\n               defaultContent,\r\n               exact\r\n            }\r\n         })\r\n      }\r\n\r\n      // --- Replace current history state with PhpSPA data ---\r\n      RuntimeManager.replaceState(\r\n         initialState,\r\n         document.title,\r\n         uri\r\n      );\r\n\r\n      // --- Set up auto-reload if specified ---\r\n      if (initialState.reloadTime) {\r\n         setTimeout(AppManager.reloadComponent, initialState.reloadTime);\r\n      }\r\n   }\r\n});\r\n\r\n\r\n/**\r\n * Handle browser back/forward button navigation\r\n * Restores page content when user navigates through browser history\r\n */\r\nwindow.addEventListener(\"popstate\", (event: PopStateEvent) => {\r\n   const navigationState: StateObject = event.state;\r\n\r\n   RuntimeManager.emit('beforeload', { route: location.toString() });\r\n\r\n   // --- Enable automatic scroll restoration ---\r\n   history.scrollRestoration = \"auto\";\r\n\r\n   // --- Check if we have valid PhpSPA state data ---\r\n   if (navigationState && navigationState.content) {\r\n      // --- Restore page title ---\r\n      document.title = navigationState.title ?? document.title;\r\n\r\n      // --- Find target container or fallback to body ---\r\n      const targetContainer =\r\n         document.getElementById(navigationState.targetID);\r\n\r\n      if (!targetContainer) {\r\n         location.reload();\r\n         return;\r\n      }\r\n\r\n      if (navigationState.targetID) {\r\n         RuntimeManager.currentRoutes[navigationState.targetID] = {\r\n            route: new URL(navigationState.url),\r\n            exact: navigationState.exact ?? false,\r\n            defaultContent: navigationState.defaultContent || ''\r\n         }\r\n      }\r\n\r\n      const currentRoutes = RuntimeManager.currentRoutes;\r\n\r\n      for (const targetID in currentRoutes) {\r\n         if (!Object.hasOwn(currentRoutes, targetID)) continue;\r\n\r\n         const targetInfo = currentRoutes[targetID];\r\n\r\n         // --- If route is exact and the route target ID is not equal to the navigated route target ID ---\r\n         // --- Then the document URL has changed ---\r\n         // --- That is they are navigating away ---\r\n         // --- And any route with exact === true must go back to its default content ---\r\n         if (targetInfo.exact === true && targetID !== navigationState.targetID) {\r\n            let currentHTML = document.getElementById(targetID)\r\n            if (currentHTML) {\r\n               try {\r\n                  morphdom(currentHTML, '<div>' + targetInfo.defaultContent + '</div>', {\r\n                     childrenOnly: true\r\n                  });\r\n               } catch {\r\n                  currentHTML.innerHTML = targetInfo.defaultContent;\r\n               }\r\n            }\r\n\r\n            delete currentRoutes[targetID];\r\n         }\r\n      }\r\n\r\n      // --- Decode and restore HTML content ---\r\n      const updateDOM = () => {\r\n         try {\r\n            morphdom(targetContainer, '<div>' + navigationState.content + '</div>', {\r\n               childrenOnly: true\r\n            });\r\n         } catch {\r\n            targetContainer.innerHTML = navigationState.content;\r\n         }\r\n      }\r\n\r\n      const completedDOMUpdate = () => {\r\n         // --- Clear old executed scripts cache ---\r\n         RuntimeManager.clearEffects();\r\n         RuntimeManager.clearExecutedScripts();\r\n\r\n         // --- Execute any inline scripts and styles in the restored content ---\r\n         RuntimeManager.runAll();\r\n\r\n         // --- Restart auto-reload timer if needed ---\r\n         if (navigationState?.reloadTime) {\r\n            setTimeout(AppManager.reloadComponent, navigationState.reloadTime);\r\n         }\r\n\r\n         RuntimeManager.emit('load', {\r\n            route: navigationState.url,\r\n            success: true,\r\n            error: false\r\n         });\r\n      }\r\n\r\n      if (document.startViewTransition) {\r\n         document.startViewTransition(updateDOM).finished.then(completedDOMUpdate).catch((reason) => {\r\n            RuntimeManager.emit('load', {\r\n               route: location.href,\r\n               success: false,\r\n               error: reason || 'Unknown error during view transition',\r\n            });\r\n         });\r\n      } else {\r\n         updateDOM();\r\n         completedDOMUpdate();\r\n      }\r\n\r\n   } else {\r\n      // --- No valid state found - reload current URL to refresh ---\r\n      location.reload();\r\n   }\r\n});\r\n\r\n\r\nif (typeof window !== \"undefined\") {\r\n   if (typeof window.setState !== \"function\") {\r\n      window.setState = AppManager.setState;\r\n   }\r\n\r\n   if (typeof window.__call !== \"function\") {\r\n      window.__call = AppManager.__call;\r\n   }\r\n\r\n   if (typeof window.useEffect !== \"function\") {\r\n      window.useEffect = AppManager.useEffect;\r\n   }\r\n}\r\n\r\n\r\nexport default AppManager;\r\n"],"names":[],"mappings":";;;;;;IAAA;;;IAGG;IACG,SAAU,YAAY,CAAC,GAAW,EAAA;IACrC,IAAA,IAAI;;IAED,QAAA,OAAO,IAAI,CAAC,GAAG,CAAC;QACnB;QAAE,OAAO,CAAC,EAAE;;IAET,QAAA,IAAI;;gBAED,MAAM,SAAS,GAAG,IAAI,WAAW,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC;gBAC/C,MAAM,YAAY,GAAG,KAAK,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,IAAI,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC;IACtF,YAAA,OAAO,IAAI,CAAC,YAAY,CAAC;YAC5B;YAAE,OAAO,aAAa,EAAE;;IAErB,YAAA,OAAO,IAAI,CACR,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,UAAU,CAAC,EAAA;IAC1B,gBAAA,OAAO,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;IACrD,YAAA,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CACb;YACJ;QACH;IACH;IAEA;;;IAGG;IACG,SAAU,YAAY,CAAC,GAAW,EAAA;IACrC,IAAA,IAAI;;IAED,QAAA,MAAM,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC;YAC9B,MAAM,KAAK,GAAG,IAAI,UAAU,CAAC,YAAY,CAAC,MAAM,CAAC;IACjD,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,YAAY,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBAC3C,KAAK,CAAC,CAAC,CAAC,GAAG,YAAY,CAAC,UAAU,CAAC,CAAC,CAAC;YACxC;YACA,OAAO,IAAI,WAAW,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC;QACzC;QAAE,OAAO,CAAC,EAAE;;IAET,QAAA,OAAO,IAAI,CAAC,GAAG,CAAC;QACnB;IACH;;ICtCA;;;;;IAKG;IACW,MAAO,cAAc,CAAA;IAChC;;IAEG;IACK,IAAA,OAAO,eAAe,GAAgB,IAAI,GAAG,EAAE;IAEvD;;IAEG;IACK,IAAA,OAAO,cAAc,GAAgB,IAAI,GAAG,EAAE;IAEtD;;;IAGG;IACK,IAAA,OAAO,oBAAoB,GAA2B,EAAE;IAEhE;;IAEG;IACI,IAAA,OAAO,aAAa,GAAwB,EAAE;QAE9C,OAAO,MAAM,GAAgB;IACjC,QAAA,UAAU,EAAE,EAAE;IACd,QAAA,IAAI,EAAE,EAAE;SACV;IAEO,IAAA,OAAO,OAAO,GAAoB,IAAI,GAAG,EAAE;IAEnD;;;;;;IAMG;IACI,IAAA,OAAO,cAAc,CAAC,QAAkC,EAAE,eAA8B,IAAI,EAAA;;IAEhG,QAAA,MAAM,OAAO,GAAG,QAAQ,EAAE;IAE1B,QAAA,MAAM,MAAM,GAAe;gBACxB,QAAQ;gBACR,YAAY;IACZ,YAAA,OAAO,EAAE,OAAO,OAAO,KAAK,UAAU,GAAG,OAAO,GAAG;aACrD;IAED,QAAA,cAAc,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC;QACrC;IAEA;;;;;IAKG;IACI,IAAA,OAAO,cAAc,CAAC,GAAW,EAAE,KAAU,EAAA;IACjD,QAAA,cAAc,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,IAAG;IACrC,YAAA,IAAI,MAAM,CAAC,YAAY,KAAK,IAAI,IAAI,MAAM,CAAC,YAAY,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;;oBAEpE,IAAI,MAAM,CAAC,OAAO;wBAAE,MAAM,CAAC,OAAO,EAAE;;IAGpC,gBAAA,MAAM,OAAO,GAAG,MAAM,CAAC,QAAQ,EAAE;IACjC,gBAAA,MAAM,CAAC,OAAO,GAAG,OAAO,OAAO,KAAK,UAAU,GAAG,OAAO,GAAG,IAAI;gBAClE;IACH,QAAA,CAAC,CAAC;QACL;IAEA;;IAEG;IACI,IAAA,OAAO,YAAY,GAAA;IACvB,QAAA,cAAc,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,IAAG;gBACrC,IAAI,MAAM,CAAC,OAAO;oBAAE,MAAM,CAAC,OAAO,EAAE;IACvC,QAAA,CAAC,CAAC;IACF,QAAA,cAAc,CAAC,OAAO,CAAC,KAAK,EAAE;QACjC;IAEO,IAAA,OAAO,MAAM,GAAA;IACjB,QAAA,KAAK,MAAM,QAAQ,IAAI,cAAc,CAAC,aAAa,EAAE;gBAClD,MAAM,OAAO,GAAG,QAAQ,CAAC,cAAc,CAAC,QAAQ,CAAC;gBAEjD,IAAI,OAAO,EAAE;IACV,gBAAA,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC;IAC9B,gBAAA,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC;IAC9B,gBAAA,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC;gBAChC;YACH;QACH;IAEA;;;IAGG;QACK,OAAO,gBAAgB,CAAC,SAAsB,EAAA;YACnD,MAAM,OAAO,GAAG,SAAS,CAAC,gBAAgB,CAAC,QAAQ,CAAC;YACpD,MAAM,KAAK,GAAG,QAAQ,CAAC,eAAe,CAAC,YAAY,CAAC,UAAU,CAAC;IAE/D,QAAA,OAAO,CAAC,OAAO,CAAC,CAAC,MAAyB,KAAI;;gBAE3C,MAAM,WAAW,GAAG,YAAY,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC;;IAG3D,YAAA,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,WAAW,CAAC,IAAI,MAAM,CAAC,WAAW,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE;IAC7E,gBAAA,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,WAAW,CAAC;;oBAGrC,MAAM,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC;IAElD,gBAAA,SAAS,CAAC,KAAK,GAAG,KAAK,IAAI,SAAS;;IAGpC,gBAAA,KAAK,MAAM,SAAS,IAAI,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,EAAE;wBACpD,SAAS,CAAC,YAAY,CAAC,SAAS,CAAC,IAAI,EAAE,SAAS,CAAC,KAAK,CAAC;oBAC1D;;oBAGA,MAAM,OAAO,GAAG,MAAM,CAAC,YAAY,CAAC,OAAO,CAAC;;oBAG5C,IAAI,OAAO,EAAE;wBACV,SAAS,CAAC,WAAW,GAAG,CAAA,qBAAA,EAAwB,MAAM,CAAC,WAAW,SAAS;oBAC9E;yBAAO;wBACJ,SAAS,CAAC,WAAW,GAAG,CAAA,eAAA,EAAkB,MAAM,CAAC,WAAW,SAAS;oBACxE;;oBAGA,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC,MAAM,EAAE;gBAChD;IACH,QAAA,CAAC,CAAC;QACL;QAGA,OAAO,gBAAgB,CAAC,SAAsB,EAAA;YAC3C,MAAM,OAAO,GAAG,SAAS,CAAC,gBAAgB,CAAC,oDAAoD,CAAkC;IAEjI,QAAA,OAAO,CAAC,OAAO,CAAC,OAAO,MAAyB,KAAmB;gBAChE,MAAM,SAAS,GAAG,MAAM,CAAC,YAAY,CAAC,KAAK,CAAC,IAAI,EAAE;gBAClD,MAAM,UAAU,GAAG,MAAM,CAAC,YAAY,CAAC,MAAM,CAAC,IAAI,EAAE;gBACpD,MAAM,KAAK,GAAG,QAAQ,CAAC,eAAe,CAAC,YAAY,CAAC,UAAU,CAAC;;gBAG/D,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE;IACvC,gBAAA,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,SAAS,CAAC;;IAGnC,gBAAA,IAAI,IAAI,CAAC,oBAAoB,CAAC,SAAS,CAAC,EAAE;wBACvC,MAAM,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC;wBAClD,SAAS,CAAC,WAAW,GAAG,IAAI,CAAC,oBAAoB,CAAC,SAAS,CAAC;IAC5D,oBAAA,SAAS,CAAC,KAAK,GAAG,KAAK,IAAI,SAAS;IACpC,oBAAA,SAAS,CAAC,IAAI,GAAG,UAAU;;wBAG3B,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC,MAAM,EAAE;wBAC7C;oBACH;IAEA,gBAAA,MAAM,QAAQ,GAAG,MAAM,KAAK,CAAC,SAAS,EAAE;IACrC,oBAAA,OAAO,EAAE;IACN,wBAAA,kBAAkB,EAAE,uBAAuB;IAC7C,qBAAA;IACH,iBAAA,CAAC;IAEF,gBAAA,IAAI,QAAQ,CAAC,EAAE,EAAE;IACd,oBAAA,MAAM,aAAa,GAAG,MAAM,QAAQ,CAAC,IAAI,EAAE;;wBAG3C,MAAM,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC;IAClD,oBAAA,SAAS,CAAC,WAAW,GAAG,aAAa;IACrC,oBAAA,SAAS,CAAC,KAAK,GAAG,KAAK,IAAI,SAAS;IACpC,oBAAA,SAAS,CAAC,IAAI,GAAG,UAAU;;wBAG3B,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC,MAAM,EAAE;;IAG7C,oBAAA,IAAI,CAAC,oBAAoB,CAAC,SAAS,CAAC,GAAG,aAAa;oBACvD;yBAAO;wBACJ,OAAO,CAAC,KAAK,CAAC,CAAA,2BAAA,EAA8B,SAAS,CAAA,EAAA,EAAK,QAAQ,CAAC,UAAU,CAAA,CAAE,CAAC;oBACnF;gBACH;IACH,QAAA,CAAC,CAAC;QACL;IAGA;;;;;;;IAOG;IACI,IAAA,OAAO,oBAAoB,GAAA;IAC/B,QAAA,cAAc,CAAC,eAAe,CAAC,KAAK,EAAE;QACzC;IAEA;;;IAGG;QACK,OAAO,eAAe,CAAC,SAAsB,EAAA;YAClD,MAAM,MAAM,GAAG,SAAS,CAAC,gBAAgB,CAAC,OAAO,CAAC;YAClD,MAAM,KAAK,GAAG,QAAQ,CAAC,eAAe,CAAC,YAAY,CAAC,UAAU,CAAC;IAE/D,QAAA,MAAM,CAAC,OAAO,CAAC,CAAC,KAAuB,KAAI;;gBAExC,MAAM,WAAW,GAAG,YAAY,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC;;IAG1D,YAAA,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,WAAW,CAAC,IAAI,KAAK,CAAC,WAAW,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE;IAC3E,gBAAA,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,WAAW,CAAC;;oBAGpC,MAAM,QAAQ,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC;IAChD,gBAAA,QAAQ,CAAC,KAAK,GAAG,KAAK,IAAI,SAAS;;IAGnC,gBAAA,KAAK,MAAM,SAAS,IAAI,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,EAAE;wBACnD,QAAQ,CAAC,YAAY,CAAC,SAAS,CAAC,IAAI,EAAE,SAAS,CAAC,KAAK,CAAC;oBACzD;;IAGA,gBAAA,QAAQ,CAAC,WAAW,GAAG,KAAK,CAAC,WAAW;oBACxC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,MAAM,EAAE;gBAC/C;IACH,QAAA,CAAC,CAAC;QACL;IAEA;;;;;;IAMG;IACH,IAAA,OAAO,IAAI,CAAC,SAA4B,EAAE,OAAqB,EAAA;YAC5D,MAAM,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,EAAE;;IAG9C,QAAA,KAAK,MAAM,QAAQ,IAAI,SAAS,EAAE;IAC/B,YAAA,IAAI,OAAO,QAAQ,KAAK,UAAU,EAAE;IACjC,gBAAA,IAAI;wBACD,QAAQ,CAAC,OAAO,CAAC;oBACpB;oBAAE,OAAO,KAAK,EAAE;;wBAEb,OAAO,CAAC,KAAK,CAAC,CAAA,SAAA,EAAY,SAAS,CAAA,gBAAA,CAAkB,EAAE,KAAK,CAAC;oBAChE;gBACH;YACH;QACH;IAEA;;;IAGG;IACI,IAAA,OAAO,SAAS,CAAC,IAAiB,EAAE,MAAc,EAAE,GAAyB,EAAA;IACjF,QAAA,IAAI;gBACD,OAAO,CAAC,SAAS,CAAC,IAAI,EAAE,MAAM,EAAE,GAAG,CAAC;YACvC;YAAE,OAAO,KAAK,EAAE;;IAEb,YAAA,OAAO,CAAC,IAAI,CAAC,+BAA+B,EAAE,KAAK,YAAY,KAAK,GAAG,KAAK,CAAC,OAAO,GAAG,KAAK,CAAC;YAChG;QACH;IAEA;;;IAGG;IACI,IAAA,OAAO,YAAY,CAAC,IAAiB,EAAE,MAAc,EAAE,GAAyB,EAAA;IACpF,QAAA,IAAI;gBACD,OAAO,CAAC,YAAY,CAAC,IAAI,EAAE,MAAM,EAAE,GAAG,CAAC;YAC1C;YAAE,OAAO,KAAK,EAAE;;IAEb,YAAA,OAAO,CAAC,IAAI,CAAC,kCAAkC,EAAE,KAAK,YAAY,KAAK,GAAG,KAAK,CAAC,OAAO,GAAG,KAAK,CAAC;YACnG;QACH;;;IC/RH,IAAI,sBAAsB,GAAG,EAAE;;IAE/B,SAAS,UAAU,CAAC,QAAQ,EAAE,MAAM,EAAE;IACtC,IAAI,IAAI,WAAW,GAAG,MAAM,CAAC,UAAU;IACvC,IAAI,IAAI,IAAI;IACZ,IAAI,IAAI,QAAQ;IAChB,IAAI,IAAI,gBAAgB;IACxB,IAAI,IAAI,SAAS;IACjB,IAAI,IAAI,SAAS;;IAEjB;IACA,IAAI,IAAI,MAAM,CAAC,QAAQ,KAAK,sBAAsB,IAAI,QAAQ,CAAC,QAAQ,KAAK,sBAAsB,EAAE;IACpG,MAAM;IACN,IAAI;;IAEJ;IACA,IAAI,KAAK,IAAI,CAAC,GAAG,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE;IACtD,QAAQ,IAAI,GAAG,WAAW,CAAC,CAAC,CAAC;IAC7B,QAAQ,QAAQ,GAAG,IAAI,CAAC,IAAI;IAC5B,QAAQ,gBAAgB,GAAG,IAAI,CAAC,YAAY;IAC5C,QAAQ,SAAS,GAAG,IAAI,CAAC,KAAK;;IAE9B,QAAQ,IAAI,gBAAgB,EAAE;IAC9B,YAAY,QAAQ,GAAG,IAAI,CAAC,SAAS,IAAI,QAAQ;IACjD,YAAY,SAAS,GAAG,QAAQ,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC;;IAE3E,YAAY,IAAI,SAAS,KAAK,SAAS,EAAE;IACzC,gBAAgB,IAAI,IAAI,CAAC,MAAM,KAAK,OAAO,CAAC;IAC5C,oBAAoB,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC;IACzC,gBAAgB;IAChB,gBAAgB,QAAQ,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,EAAE,SAAS,CAAC;IAC9E,YAAY;IACZ,QAAQ,CAAC,MAAM;IACf,YAAY,SAAS,GAAG,QAAQ,CAAC,YAAY,CAAC,QAAQ,CAAC;;IAEvD,YAAY,IAAI,SAAS,KAAK,SAAS,EAAE;IACzC,gBAAgB,QAAQ,CAAC,YAAY,CAAC,QAAQ,EAAE,SAAS,CAAC;IAC1D,YAAY;IACZ,QAAQ;IACR,IAAI;;IAEJ;IACA;IACA,IAAI,IAAI,aAAa,GAAG,QAAQ,CAAC,UAAU;;IAE3C,IAAI,KAAK,IAAI,CAAC,GAAG,aAAa,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE;IACxD,QAAQ,IAAI,GAAG,aAAa,CAAC,CAAC,CAAC;IAC/B,QAAQ,QAAQ,GAAG,IAAI,CAAC,IAAI;IAC5B,QAAQ,gBAAgB,GAAG,IAAI,CAAC,YAAY;;IAE5C,QAAQ,IAAI,gBAAgB,EAAE;IAC9B,YAAY,QAAQ,GAAG,IAAI,CAAC,SAAS,IAAI,QAAQ;;IAEjD,YAAY,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,EAAE;IACpE,gBAAgB,QAAQ,CAAC,iBAAiB,CAAC,gBAAgB,EAAE,QAAQ,CAAC;IACtE,YAAY;IACZ,QAAQ,CAAC,MAAM;IACf,YAAY,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,QAAQ,CAAC,EAAE;IAChD,gBAAgB,QAAQ,CAAC,eAAe,CAAC,QAAQ,CAAC;IAClD,YAAY;IACZ,QAAQ;IACR,IAAI;IACJ;;IAEA,IAAI,KAAK,CAAC;IACV,IAAI,QAAQ,GAAG,8BAA8B;;IAE7C,IAAI,GAAG,GAAG,OAAO,QAAQ,KAAK,WAAW,GAAG,SAAS,GAAG,QAAQ;IAChE,IAAI,oBAAoB,GAAG,CAAC,CAAC,GAAG,IAAI,SAAS,IAAI,GAAG,CAAC,aAAa,CAAC,UAAU,CAAC;IAC9E,IAAI,iBAAiB,GAAG,CAAC,CAAC,GAAG,IAAI,GAAG,CAAC,WAAW,IAAI,0BAA0B,IAAI,GAAG,CAAC,WAAW,EAAE;;IAEnG,SAAS,0BAA0B,CAAC,GAAG,EAAE;IACzC,IAAI,IAAI,QAAQ,GAAG,GAAG,CAAC,aAAa,CAAC,UAAU,CAAC;IAChD,IAAI,QAAQ,CAAC,SAAS,GAAG,GAAG;IAC5B,IAAI,OAAO,QAAQ,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC;IACzC;;IAEA,SAAS,uBAAuB,CAAC,GAAG,EAAE;IACtC,IAAI,IAAI,CAAC,KAAK,EAAE;IAChB,QAAQ,KAAK,GAAG,GAAG,CAAC,WAAW,EAAE;IACjC,QAAQ,KAAK,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC;IAClC,IAAI;;IAEJ,IAAI,IAAI,QAAQ,GAAG,KAAK,CAAC,wBAAwB,CAAC,GAAG,CAAC;IACtD,IAAI,OAAO,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC;IACjC;;IAEA,SAAS,sBAAsB,CAAC,GAAG,EAAE;IACrC,IAAI,IAAI,QAAQ,GAAG,GAAG,CAAC,aAAa,CAAC,MAAM,CAAC;IAC5C,IAAI,QAAQ,CAAC,SAAS,GAAG,GAAG;IAC5B,IAAI,OAAO,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC;IACjC;;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,SAAS,SAAS,CAAC,GAAG,EAAE;IACxB,IAAI,GAAG,GAAG,GAAG,CAAC,IAAI,EAAE;IACpB,IAAI,IAAI,oBAAoB,EAAE;IAC9B;IACA;IACA;IACA,MAAM,OAAO,0BAA0B,CAAC,GAAG,CAAC;IAC5C,IAAI,CAAC,MAAM,IAAI,iBAAiB,EAAE;IAClC,MAAM,OAAO,uBAAuB,CAAC,GAAG,CAAC;IACzC,IAAI;;IAEJ,IAAI,OAAO,sBAAsB,CAAC,GAAG,CAAC;IACtC;;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,SAAS,gBAAgB,CAAC,MAAM,EAAE,IAAI,EAAE;IACxC,IAAI,IAAI,YAAY,GAAG,MAAM,CAAC,QAAQ;IACtC,IAAI,IAAI,UAAU,GAAG,IAAI,CAAC,QAAQ;IAClC,IAAI,IAAI,aAAa,EAAE,WAAW;;IAElC,IAAI,IAAI,YAAY,KAAK,UAAU,EAAE;IACrC,QAAQ,OAAO,IAAI;IACnB,IAAI;;IAEJ,IAAI,aAAa,GAAG,YAAY,CAAC,UAAU,CAAC,CAAC,CAAC;IAC9C,IAAI,WAAW,GAAG,UAAU,CAAC,UAAU,CAAC,CAAC,CAAC;;IAE1C;IACA;IACA;IACA;IACA,IAAI,IAAI,aAAa,IAAI,EAAE,IAAI,WAAW,IAAI,EAAE,EAAE;IAClD,QAAQ,OAAO,YAAY,KAAK,UAAU,CAAC,WAAW,EAAE;IACxD,IAAI,CAAC,MAAM,IAAI,WAAW,IAAI,EAAE,IAAI,aAAa,IAAI,EAAE,EAAE;IACzD,QAAQ,OAAO,UAAU,KAAK,YAAY,CAAC,WAAW,EAAE;IACxD,IAAI,CAAC,MAAM;IACX,QAAQ,OAAO,KAAK;IACpB,IAAI;IACJ;;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,SAAS,eAAe,CAAC,IAAI,EAAE,YAAY,EAAE;IAC7C,IAAI,OAAO,CAAC,YAAY,IAAI,YAAY,KAAK,QAAQ;IACrD,QAAQ,GAAG,CAAC,aAAa,CAAC,IAAI,CAAC;IAC/B,QAAQ,GAAG,CAAC,eAAe,CAAC,YAAY,EAAE,IAAI,CAAC;IAC/C;;IAEA;IACA;IACA;IACA,SAAS,YAAY,CAAC,MAAM,EAAE,IAAI,EAAE;IACpC,IAAI,IAAI,QAAQ,GAAG,MAAM,CAAC,UAAU;IACpC,IAAI,OAAO,QAAQ,EAAE;IACrB,QAAQ,IAAI,SAAS,GAAG,QAAQ,CAAC,WAAW;IAC5C,QAAQ,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC;IAClC,QAAQ,QAAQ,GAAG,SAAS;IAC5B,IAAI;IACJ,IAAI,OAAO,IAAI;IACf;;IAEA,SAAS,mBAAmB,CAAC,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE;IACjD,IAAI,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,EAAE;IACrC,QAAQ,MAAM,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC;IACjC,QAAQ,IAAI,MAAM,CAAC,IAAI,CAAC,EAAE;IAC1B,YAAY,MAAM,CAAC,YAAY,CAAC,IAAI,EAAE,EAAE,CAAC;IACzC,QAAQ,CAAC,MAAM;IACf,YAAY,MAAM,CAAC,eAAe,CAAC,IAAI,CAAC;IACxC,QAAQ;IACR,IAAI;IACJ;;IAEA,IAAI,iBAAiB,GAAG;IACxB,IAAI,MAAM,EAAE,SAAS,MAAM,EAAE,IAAI,EAAE;IACnC,QAAQ,IAAI,UAAU,GAAG,MAAM,CAAC,UAAU;IAC1C,QAAQ,IAAI,UAAU,EAAE;IACxB,YAAY,IAAI,UAAU,GAAG,UAAU,CAAC,QAAQ,CAAC,WAAW,EAAE;IAC9D,YAAY,IAAI,UAAU,KAAK,UAAU,EAAE;IAC3C,gBAAgB,UAAU,GAAG,UAAU,CAAC,UAAU;IAClD,gBAAgB,UAAU,GAAG,UAAU,IAAI,UAAU,CAAC,QAAQ,CAAC,WAAW,EAAE;IAC5E,YAAY;IACZ,YAAY,IAAI,UAAU,KAAK,QAAQ,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,UAAU,CAAC,EAAE;IACjF,gBAAgB,IAAI,MAAM,CAAC,YAAY,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;IACvE;IACA;IACA;IACA,oBAAoB,MAAM,CAAC,YAAY,CAAC,UAAU,EAAE,UAAU,CAAC;IAC/D,oBAAoB,MAAM,CAAC,eAAe,CAAC,UAAU,CAAC;IACtD,gBAAgB;IAChB;IACA;IACA;IACA,gBAAgB,UAAU,CAAC,aAAa,GAAG,EAAE;IAC7C,YAAY;IACZ,QAAQ;IACR,QAAQ,mBAAmB,CAAC,MAAM,EAAE,IAAI,EAAE,UAAU,CAAC;IACrD,IAAI,CAAC;IACL;IACA;IACA;IACA;IACA;IACA;IACA,IAAI,KAAK,EAAE,SAAS,MAAM,EAAE,IAAI,EAAE;IAClC,QAAQ,mBAAmB,CAAC,MAAM,EAAE,IAAI,EAAE,SAAS,CAAC;IACpD,QAAQ,mBAAmB,CAAC,MAAM,EAAE,IAAI,EAAE,UAAU,CAAC;;IAErD,QAAQ,IAAI,MAAM,CAAC,KAAK,KAAK,IAAI,CAAC,KAAK,EAAE;IACzC,YAAY,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK;IACrC,QAAQ;;IAER,QAAQ,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,EAAE;IACzC,YAAY,MAAM,CAAC,eAAe,CAAC,OAAO,CAAC;IAC3C,QAAQ;IACR,IAAI,CAAC;;IAEL,IAAI,QAAQ,EAAE,SAAS,MAAM,EAAE,IAAI,EAAE;IACrC,QAAQ,IAAI,QAAQ,GAAG,IAAI,CAAC,KAAK;IACjC,QAAQ,IAAI,MAAM,CAAC,KAAK,KAAK,QAAQ,EAAE;IACvC,YAAY,MAAM,CAAC,KAAK,GAAG,QAAQ;IACnC,QAAQ;;IAER,QAAQ,IAAI,UAAU,GAAG,MAAM,CAAC,UAAU;IAC1C,QAAQ,IAAI,UAAU,EAAE;IACxB;IACA;IACA,YAAY,IAAI,QAAQ,GAAG,UAAU,CAAC,SAAS;;IAE/C,YAAY,IAAI,QAAQ,IAAI,QAAQ,KAAK,CAAC,QAAQ,IAAI,QAAQ,IAAI,MAAM,CAAC,WAAW,CAAC,EAAE;IACvF,gBAAgB;IAChB,YAAY;;IAEZ,YAAY,UAAU,CAAC,SAAS,GAAG,QAAQ;IAC3C,QAAQ;IACR,IAAI,CAAC;IACL,IAAI,MAAM,EAAE,SAAS,MAAM,EAAE,IAAI,EAAE;IACnC,QAAQ,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,EAAE;IAC5C,YAAY,IAAI,aAAa,GAAG,EAAE;IAClC,YAAY,IAAI,CAAC,GAAG,CAAC;IACrB;IACA;IACA;IACA;IACA,YAAY,IAAI,QAAQ,GAAG,MAAM,CAAC,UAAU;IAC5C,YAAY,IAAI,QAAQ;IACxB,YAAY,IAAI,QAAQ;IACxB,YAAY,MAAM,QAAQ,EAAE;IAC5B,gBAAgB,QAAQ,GAAG,QAAQ,CAAC,QAAQ,IAAI,QAAQ,CAAC,QAAQ,CAAC,WAAW,EAAE;IAC/E,gBAAgB,IAAI,QAAQ,KAAK,UAAU,EAAE;IAC7C,oBAAoB,QAAQ,GAAG,QAAQ;IACvC,oBAAoB,QAAQ,GAAG,QAAQ,CAAC,UAAU;IAClD;IACA,oBAAoB,IAAI,CAAC,QAAQ,EAAE;IACnC,wBAAwB,QAAQ,GAAG,QAAQ,CAAC,WAAW;IACvD,wBAAwB,QAAQ,GAAG,IAAI;IACvC,oBAAoB;IACpB,gBAAgB,CAAC,MAAM;IACvB,oBAAoB,IAAI,QAAQ,KAAK,QAAQ,EAAE;IAC/C,wBAAwB,IAAI,QAAQ,CAAC,YAAY,CAAC,UAAU,CAAC,EAAE;IAC/D,4BAA4B,aAAa,GAAG,CAAC;IAC7C,4BAA4B;IAC5B,wBAAwB;IACxB,wBAAwB,CAAC,EAAE;IAC3B,oBAAoB;IACpB,oBAAoB,QAAQ,GAAG,QAAQ,CAAC,WAAW;IACnD,oBAAoB,IAAI,CAAC,QAAQ,IAAI,QAAQ,EAAE;IAC/C,wBAAwB,QAAQ,GAAG,QAAQ,CAAC,WAAW;IACvD,wBAAwB,QAAQ,GAAG,IAAI;IACvC,oBAAoB;IACpB,gBAAgB;IAChB,YAAY;;IAEZ,YAAY,MAAM,CAAC,aAAa,GAAG,aAAa;IAChD,QAAQ;IACR,IAAI;IACJ,CAAC;;IAED,IAAI,YAAY,GAAG,CAAC;IACpB,IAAI,wBAAwB,GAAG,EAAE;IACjC,IAAI,SAAS,GAAG,CAAC;IACjB,IAAI,YAAY,GAAG,CAAC;;IAEpB,SAAS,IAAI,GAAG,CAAC;;IAEjB,SAAS,iBAAiB,CAAC,IAAI,EAAE;IACjC,EAAE,IAAI,IAAI,EAAE;IACZ,IAAI,OAAO,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC,EAAE;IACpE,EAAE;IACF;;IAEA,SAAS,eAAe,CAAC,UAAU,EAAE;;IAErC,EAAE,OAAO,SAAS,QAAQ,CAAC,QAAQ,EAAE,MAAM,EAAE,OAAO,EAAE;IACtD,IAAI,IAAI,CAAC,OAAO,EAAE;IAClB,MAAM,OAAO,GAAG,EAAE;IAClB,IAAI;;IAEJ,IAAI,IAAI,OAAO,MAAM,KAAK,QAAQ,EAAE;IACpC,MAAM,IAAI,QAAQ,CAAC,QAAQ,KAAK,WAAW,IAAI,QAAQ,CAAC,QAAQ,KAAK,MAAM,IAAI,QAAQ,CAAC,QAAQ,KAAK,MAAM,EAAE;IAC7G,QAAQ,IAAI,UAAU,GAAG,MAAM;IAC/B,QAAQ,MAAM,GAAG,GAAG,CAAC,aAAa,CAAC,MAAM,CAAC;IAC1C,QAAQ,MAAM,CAAC,SAAS,GAAG,UAAU;IACrC,MAAM,CAAC,MAAM;IACb,QAAQ,MAAM,GAAG,SAAS,CAAC,MAAM,CAAC;IAClC,MAAM;IACN,IAAI,CAAC,MAAM,IAAI,MAAM,CAAC,QAAQ,KAAK,wBAAwB,EAAE;IAC7D,MAAM,MAAM,GAAG,MAAM,CAAC,iBAAiB;IACvC,IAAI;;IAEJ,IAAI,IAAI,UAAU,GAAG,OAAO,CAAC,UAAU,IAAI,iBAAiB;IAC5D,IAAI,IAAI,iBAAiB,GAAG,OAAO,CAAC,iBAAiB,IAAI,IAAI;IAC7D,IAAI,IAAI,WAAW,GAAG,OAAO,CAAC,WAAW,IAAI,IAAI;IACjD,IAAI,IAAI,iBAAiB,GAAG,OAAO,CAAC,iBAAiB,IAAI,IAAI;IAC7D,IAAI,IAAI,WAAW,GAAG,OAAO,CAAC,WAAW,IAAI,IAAI;IACjD,IAAI,IAAI,qBAAqB,GAAG,OAAO,CAAC,qBAAqB,IAAI,IAAI;IACrE,IAAI,IAAI,eAAe,GAAG,OAAO,CAAC,eAAe,IAAI,IAAI;IACzD,IAAI,IAAI,yBAAyB,GAAG,OAAO,CAAC,yBAAyB,IAAI,IAAI;IAC7E,IAAI,IAAI,gBAAgB,GAAG,OAAO,CAAC,gBAAgB,IAAI,IAAI;IAC3D,IAAI,IAAI,QAAQ,GAAG,OAAO,CAAC,QAAQ,IAAI,SAAS,MAAM,EAAE,KAAK,CAAC,EAAE,OAAO,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;IACnG,IAAI,IAAI,YAAY,GAAG,OAAO,CAAC,YAAY,KAAK,IAAI;;IAEpD;IACA,IAAI,IAAI,eAAe,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC;IAC7C,IAAI,IAAI,gBAAgB,GAAG,EAAE;;IAE7B,IAAI,SAAS,eAAe,CAAC,GAAG,EAAE;IAClC,MAAM,gBAAgB,CAAC,IAAI,CAAC,GAAG,CAAC;IAChC,IAAI;;IAEJ,IAAI,SAAS,uBAAuB,CAAC,IAAI,EAAE,cAAc,EAAE;IAC3D,MAAM,IAAI,IAAI,CAAC,QAAQ,KAAK,YAAY,EAAE;IAC1C,QAAQ,IAAI,QAAQ,GAAG,IAAI,CAAC,UAAU;IACtC,QAAQ,OAAO,QAAQ,EAAE;;IAEzB,UAAU,IAAI,GAAG,GAAG,SAAS;;IAE7B,UAAU,IAAI,cAAc,KAAK,GAAG,GAAG,UAAU,CAAC,QAAQ,CAAC,CAAC,EAAE;IAC9D;IACA;IACA,YAAY,eAAe,CAAC,GAAG,CAAC;IAChC,UAAU,CAAC,MAAM;IACjB;IACA;IACA;IACA,YAAY,eAAe,CAAC,QAAQ,CAAC;IACrC,YAAY,IAAI,QAAQ,CAAC,UAAU,EAAE;IACrC,cAAc,uBAAuB,CAAC,QAAQ,EAAE,cAAc,CAAC;IAC/D,YAAY;IACZ,UAAU;;IAEV,UAAU,QAAQ,GAAG,QAAQ,CAAC,WAAW;IACzC,QAAQ;IACR,MAAM;IACN,IAAI;;IAEJ;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,IAAI,SAAS,UAAU,CAAC,IAAI,EAAE,UAAU,EAAE,cAAc,EAAE;IAC1D,MAAM,IAAI,qBAAqB,CAAC,IAAI,CAAC,KAAK,KAAK,EAAE;IACjD,QAAQ;IACR,MAAM;;IAEN,MAAM,IAAI,UAAU,EAAE;IACtB,QAAQ,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC;IACpC,MAAM;;IAEN,MAAM,eAAe,CAAC,IAAI,CAAC;IAC3B,MAAM,uBAAuB,CAAC,IAAI,EAAE,cAAc,CAAC;IACnD,IAAI;;IAEJ;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA,IAAI,SAAS,SAAS,CAAC,IAAI,EAAE;IAC7B,MAAM,IAAI,IAAI,CAAC,QAAQ,KAAK,YAAY,IAAI,IAAI,CAAC,QAAQ,KAAK,wBAAwB,EAAE;IACxF,QAAQ,IAAI,QAAQ,GAAG,IAAI,CAAC,UAAU;IACtC,QAAQ,OAAO,QAAQ,EAAE;IACzB,UAAU,IAAI,GAAG,GAAG,UAAU,CAAC,QAAQ,CAAC;IACxC,UAAU,IAAI,GAAG,EAAE;IACnB,YAAY,eAAe,CAAC,GAAG,CAAC,GAAG,QAAQ;IAC3C,UAAU;;IAEV;IACA,UAAU,SAAS,CAAC,QAAQ,CAAC;;IAE7B,UAAU,QAAQ,GAAG,QAAQ,CAAC,WAAW;IACzC,QAAQ;IACR,MAAM;IACN,IAAI;;IAEJ,IAAI,SAAS,CAAC,QAAQ,CAAC;;IAEvB,IAAI,SAAS,eAAe,CAAC,EAAE,EAAE;IACjC,MAAM,WAAW,CAAC,EAAE,CAAC;;IAErB,MAAM,IAAI,QAAQ,GAAG,EAAE,CAAC,UAAU;IAClC,MAAM,OAAO,QAAQ,EAAE;IACvB,QAAQ,IAAI,WAAW,GAAG,QAAQ,CAAC,WAAW;;IAE9C,QAAQ,IAAI,GAAG,GAAG,UAAU,CAAC,QAAQ,CAAC;IACtC,QAAQ,IAAI,GAAG,EAAE;IACjB,UAAU,IAAI,eAAe,GAAG,eAAe,CAAC,GAAG,CAAC;IACpD;IACA;IACA,UAAU,IAAI,eAAe,IAAI,gBAAgB,CAAC,QAAQ,EAAE,eAAe,CAAC,EAAE;IAC9E,YAAY,QAAQ,CAAC,UAAU,CAAC,YAAY,CAAC,eAAe,EAAE,QAAQ,CAAC;IACvE,YAAY,OAAO,CAAC,eAAe,EAAE,QAAQ,CAAC;IAC9C,UAAU,CAAC,MAAM;IACjB,YAAY,eAAe,CAAC,QAAQ,CAAC;IACrC,UAAU;IACV,QAAQ,CAAC,MAAM;IACf;IACA;IACA,UAAU,eAAe,CAAC,QAAQ,CAAC;IACnC,QAAQ;;IAER,QAAQ,QAAQ,GAAG,WAAW;IAC9B,MAAM;IACN,IAAI;;IAEJ,IAAI,SAAS,aAAa,CAAC,MAAM,EAAE,gBAAgB,EAAE,cAAc,EAAE;IACrE;IACA;IACA;IACA,MAAM,OAAO,gBAAgB,EAAE;IAC/B,QAAQ,IAAI,eAAe,GAAG,gBAAgB,CAAC,WAAW;IAC1D,QAAQ,KAAK,cAAc,GAAG,UAAU,CAAC,gBAAgB,CAAC,GAAG;IAC7D;IACA;IACA,UAAU,eAAe,CAAC,cAAc,CAAC;IACzC,QAAQ,CAAC,MAAM;IACf;IACA;IACA,UAAU,UAAU,CAAC,gBAAgB,EAAE,MAAM,EAAE,IAAI,wBAAwB;IAC3E,QAAQ;IACR,QAAQ,gBAAgB,GAAG,eAAe;IAC1C,MAAM;IACN,IAAI;;IAEJ,IAAI,SAAS,OAAO,CAAC,MAAM,EAAE,IAAI,EAAE,YAAY,EAAE;IACjD,MAAM,IAAI,OAAO,GAAG,UAAU,CAAC,IAAI,CAAC;;IAEpC,MAAM,IAAI,OAAO,EAAE;IACnB;IACA;IACA,QAAQ,OAAO,eAAe,CAAC,OAAO,CAAC;IACvC,MAAM;;IAEN,MAAM,IAAI,CAAC,YAAY,EAAE;IACzB;IACA,QAAQ,IAAI,kBAAkB,GAAG,iBAAiB,CAAC,MAAM,EAAE,IAAI,CAAC;IAChE,QAAQ,IAAI,kBAAkB,KAAK,KAAK,EAAE;IAC1C,UAAU;IACV,QAAQ,CAAC,MAAM,IAAI,kBAAkB,YAAY,WAAW,EAAE;IAC9D,UAAU,MAAM,GAAG,kBAAkB;IACrC;IACA;IACA;IACA;IACA,UAAU,SAAS,CAAC,MAAM,CAAC;IAC3B,QAAQ;;IAER;IACA,QAAQ,UAAU,CAAC,MAAM,EAAE,IAAI,CAAC;IAChC;IACA,QAAQ,WAAW,CAAC,MAAM,CAAC;;IAE3B,QAAQ,IAAI,yBAAyB,CAAC,MAAM,EAAE,IAAI,CAAC,KAAK,KAAK,EAAE;IAC/D,UAAU;IACV,QAAQ;IACR,MAAM;;IAEN,MAAM,IAAI,MAAM,CAAC,QAAQ,KAAK,UAAU,EAAE;IAC1C,QAAQ,aAAa,CAAC,MAAM,EAAE,IAAI,CAAC;IACnC,MAAM,CAAC,MAAM;IACb,QAAQ,iBAAiB,CAAC,QAAQ,CAAC,MAAM,EAAE,IAAI,CAAC;IAChD,MAAM;IACN,IAAI;;IAEJ,IAAI,SAAS,aAAa,CAAC,MAAM,EAAE,IAAI,EAAE;IACzC,MAAM,IAAI,QAAQ,GAAG,gBAAgB,CAAC,MAAM,EAAE,IAAI,CAAC;IACnD,MAAM,IAAI,cAAc,GAAG,IAAI,CAAC,UAAU;IAC1C,MAAM,IAAI,gBAAgB,GAAG,MAAM,CAAC,UAAU;IAC9C,MAAM,IAAI,YAAY;IACtB,MAAM,IAAI,cAAc;;IAExB,MAAM,IAAI,eAAe;IACzB,MAAM,IAAI,aAAa;IACvB,MAAM,IAAI,cAAc;;IAExB;IACA,MAAM,KAAK,EAAE,OAAO,cAAc,EAAE;IACpC,QAAQ,aAAa,GAAG,cAAc,CAAC,WAAW;IAClD,QAAQ,YAAY,GAAG,UAAU,CAAC,cAAc,CAAC;;IAEjD;IACA,QAAQ,OAAO,CAAC,QAAQ,IAAI,gBAAgB,EAAE;IAC9C,UAAU,eAAe,GAAG,gBAAgB,CAAC,WAAW;;IAExD,UAAU,IAAI,cAAc,CAAC,UAAU,IAAI,cAAc,CAAC,UAAU,CAAC,gBAAgB,CAAC,EAAE;IACxF,YAAY,cAAc,GAAG,aAAa;IAC1C,YAAY,gBAAgB,GAAG,eAAe;IAC9C,YAAY,SAAS,KAAK;IAC1B,UAAU;;IAEV,UAAU,cAAc,GAAG,UAAU,CAAC,gBAAgB,CAAC;;IAEvD,UAAU,IAAI,eAAe,GAAG,gBAAgB,CAAC,QAAQ;;IAEzD;IACA,UAAU,IAAI,YAAY,GAAG,SAAS;;IAEtC,UAAU,IAAI,eAAe,KAAK,cAAc,CAAC,QAAQ,EAAE;IAC3D,YAAY,IAAI,eAAe,KAAK,YAAY,EAAE;IAClD;;IAEA,cAAc,IAAI,YAAY,EAAE;IAChC;IACA;IACA,gBAAgB,IAAI,YAAY,KAAK,cAAc,EAAE;IACrD;IACA;IACA;IACA,kBAAkB,KAAK,cAAc,GAAG,eAAe,CAAC,YAAY,CAAC,GAAG;IACxE,oBAAoB,IAAI,eAAe,KAAK,cAAc,EAAE;IAC5D;IACA;IACA;IACA;IACA;IACA,sBAAsB,YAAY,GAAG,KAAK;IAC1C,oBAAoB,CAAC,MAAM;IAC3B;IACA;IACA;;IAEA;IACA;IACA;IACA,sBAAsB,MAAM,CAAC,YAAY,CAAC,cAAc,EAAE,gBAAgB,CAAC;;IAE3E;;IAEA,sBAAsB,IAAI,cAAc,EAAE;IAC1C;IACA;IACA,wBAAwB,eAAe,CAAC,cAAc,CAAC;IACvD,sBAAsB,CAAC,MAAM;IAC7B;IACA;IACA,wBAAwB,UAAU,CAAC,gBAAgB,EAAE,MAAM,EAAE,IAAI,wBAAwB;IACzF,sBAAsB;;IAEtB,sBAAsB,gBAAgB,GAAG,cAAc;IACvD,sBAAsB,cAAc,GAAG,UAAU,CAAC,gBAAgB,CAAC;IACnE,oBAAoB;IACpB,kBAAkB,CAAC,MAAM;IACzB;IACA;IACA,oBAAoB,YAAY,GAAG,KAAK;IACxC,kBAAkB;IAClB,gBAAgB;IAChB,cAAc,CAAC,MAAM,IAAI,cAAc,EAAE;IACzC;IACA,gBAAgB,YAAY,GAAG,KAAK;IACpC,cAAc;;IAEd,cAAc,YAAY,GAAG,YAAY,KAAK,KAAK,IAAI,gBAAgB,CAAC,gBAAgB,EAAE,cAAc,CAAC;IACzG,cAAc,IAAI,YAAY,EAAE;IAChC;IACA;IACA;IACA;IACA,gBAAgB,OAAO,CAAC,gBAAgB,EAAE,cAAc,CAAC;IACzD,cAAc;;IAEd,YAAY,CAAC,MAAM,IAAI,eAAe,KAAK,SAAS,IAAI,eAAe,IAAI,YAAY,EAAE;IACzF;IACA,cAAc,YAAY,GAAG,IAAI;IACjC;IACA;IACA,cAAc,IAAI,gBAAgB,CAAC,SAAS,KAAK,cAAc,CAAC,SAAS,EAAE;IAC3E,gBAAgB,gBAAgB,CAAC,SAAS,GAAG,cAAc,CAAC,SAAS;IACrE,cAAc;;IAEd,YAAY;IACZ,UAAU;;IAEV,UAAU,IAAI,YAAY,EAAE;IAC5B;IACA;IACA,YAAY,cAAc,GAAG,aAAa;IAC1C,YAAY,gBAAgB,GAAG,eAAe;IAC9C,YAAY,SAAS,KAAK;IAC1B,UAAU;;IAEV;IACA;IACA;IACA;IACA;IACA;IACA,UAAU,IAAI,cAAc,EAAE;IAC9B;IACA;IACA,YAAY,eAAe,CAAC,cAAc,CAAC;IAC3C,UAAU,CAAC,MAAM;IACjB;IACA;IACA,YAAY,UAAU,CAAC,gBAAgB,EAAE,MAAM,EAAE,IAAI,wBAAwB;IAC7E,UAAU;;IAEV,UAAU,gBAAgB,GAAG,eAAe;IAC5C,QAAQ,CAAC;;IAET;IACA;IACA;IACA;IACA,QAAQ,IAAI,YAAY,KAAK,cAAc,GAAG,eAAe,CAAC,YAAY,CAAC,CAAC,IAAI,gBAAgB,CAAC,cAAc,EAAE,cAAc,CAAC,EAAE;IAClI;IACA,UAAU,GAAG,CAAC,QAAQ,CAAC,EAAE,QAAQ,CAAC,MAAM,EAAE,cAAc,CAAC,CAAC,CAAC;IAC3D,UAAU,OAAO,CAAC,cAAc,EAAE,cAAc,CAAC;IACjD,QAAQ,CAAC,MAAM;IACf,UAAU,IAAI,uBAAuB,GAAG,iBAAiB,CAAC,cAAc,CAAC;IACzE,UAAU,IAAI,uBAAuB,KAAK,KAAK,EAAE;IACjD,YAAY,IAAI,uBAAuB,EAAE;IACzC,cAAc,cAAc,GAAG,uBAAuB;IACtD,YAAY;;IAEZ,YAAY,IAAI,cAAc,CAAC,SAAS,EAAE;IAC1C,cAAc,cAAc,GAAG,cAAc,CAAC,SAAS,CAAC,MAAM,CAAC,aAAa,IAAI,GAAG,CAAC;IACpF,YAAY;IACZ,YAAY,QAAQ,CAAC,MAAM,EAAE,cAAc,CAAC;IAC5C,YAAY,eAAe,CAAC,cAAc,CAAC;IAC3C,UAAU;IACV,QAAQ;;IAER,QAAQ,cAAc,GAAG,aAAa;IACtC,QAAQ,gBAAgB,GAAG,eAAe;IAC1C,MAAM;;IAEN,MAAM,aAAa,CAAC,MAAM,EAAE,gBAAgB,EAAE,cAAc,CAAC;;IAE7D,MAAM,IAAI,gBAAgB,GAAG,iBAAiB,CAAC,MAAM,CAAC,QAAQ,CAAC;IAC/D,MAAM,IAAI,gBAAgB,EAAE;IAC5B,QAAQ,gBAAgB,CAAC,MAAM,EAAE,IAAI,CAAC;IACtC,MAAM;IACN,IAAI,CAAC;;IAEL,IAAI,IAAI,WAAW,GAAG,QAAQ;IAC9B,IAAI,IAAI,eAAe,GAAG,WAAW,CAAC,QAAQ;IAC9C,IAAI,IAAI,UAAU,GAAG,MAAM,CAAC,QAAQ;;IAEpC,IAAI,IAAI,CAAC,YAAY,EAAE;IACvB;IACA;IACA,MAAM,IAAI,eAAe,KAAK,YAAY,EAAE;IAC5C,QAAQ,IAAI,UAAU,KAAK,YAAY,EAAE;IACzC,UAAU,IAAI,CAAC,gBAAgB,CAAC,QAAQ,EAAE,MAAM,CAAC,EAAE;IACnD,YAAY,eAAe,CAAC,QAAQ,CAAC;IACrC,YAAY,WAAW,GAAG,YAAY,CAAC,QAAQ,EAAE,eAAe,CAAC,MAAM,CAAC,QAAQ,EAAE,MAAM,CAAC,YAAY,CAAC,CAAC;IACvG,UAAU;IACV,QAAQ,CAAC,MAAM;IACf;IACA,UAAU,WAAW,GAAG,MAAM;IAC9B,QAAQ;IACR,MAAM,CAAC,MAAM,IAAI,eAAe,KAAK,SAAS,IAAI,eAAe,KAAK,YAAY,EAAE;IACpF,QAAQ,IAAI,UAAU,KAAK,eAAe,EAAE;IAC5C,UAAU,IAAI,WAAW,CAAC,SAAS,KAAK,MAAM,CAAC,SAAS,EAAE;IAC1D,YAAY,WAAW,CAAC,SAAS,GAAG,MAAM,CAAC,SAAS;IACpD,UAAU;;IAEV,UAAU,OAAO,WAAW;IAC5B,QAAQ,CAAC,MAAM;IACf;IACA,UAAU,WAAW,GAAG,MAAM;IAC9B,QAAQ;IACR,MAAM;IACN,IAAI;;IAEJ,IAAI,IAAI,WAAW,KAAK,MAAM,EAAE;IAChC;IACA;IACA,MAAM,eAAe,CAAC,QAAQ,CAAC;IAC/B,IAAI,CAAC,MAAM;IACX,MAAM,IAAI,MAAM,CAAC,UAAU,IAAI,MAAM,CAAC,UAAU,CAAC,WAAW,CAAC,EAAE;IAC/D,QAAQ;IACR,MAAM;;IAEN,MAAM,OAAO,CAAC,WAAW,EAAE,MAAM,EAAE,YAAY,CAAC;;IAEhD;IACA;IACA;IACA;IACA;IACA,MAAM,IAAI,gBAAgB,EAAE;IAC5B,QAAQ,KAAK,IAAI,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,gBAAgB,CAAC,MAAM,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,EAAE;IAC/D,UAAU,IAAI,UAAU,GAAG,eAAe,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC;IAC/D,UAAU,IAAI,UAAU,EAAE;IAC1B,YAAY,UAAU,CAAC,UAAU,EAAE,UAAU,CAAC,UAAU,EAAE,KAAK,CAAC;IAChE,UAAU;IACV,QAAQ;IACR,MAAM;IACN,IAAI;;IAEJ,IAAI,IAAI,CAAC,YAAY,IAAI,WAAW,KAAK,QAAQ,IAAI,QAAQ,CAAC,UAAU,EAAE;IAC1E,MAAM,IAAI,WAAW,CAAC,SAAS,EAAE;IACjC,QAAQ,WAAW,GAAG,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,aAAa,IAAI,GAAG,CAAC;IAC1E,MAAM;IACN;IACA;IACA;IACA;IACA;IACA,MAAM,QAAQ,CAAC,UAAU,CAAC,YAAY,CAAC,WAAW,EAAE,QAAQ,CAAC;IAC7D,IAAI;;IAEJ,IAAI,OAAO,WAAW;IACtB,EAAE,CAAC;IACH;;IAEA,IAAI,QAAQ,GAAG,eAAe,CAAC,UAAU,CAAC;;IC7vB5B,MAAO,UAAU,CAAA;IAC5B;;;;;;;;;;IAUG;IACI,IAAA,OAAO,QAAQ,CAAC,GAAe,EAAE,QAA4B,MAAM,EAAA;YACvE,MAAM,MAAM,GAAG,GAAG,YAAY,GAAG,GAAG,GAAG,GAAG,IAAI,GAAG,CAAC,GAAG,EAAE,QAAQ,CAAC,QAAQ,EAAE,CAAC;;IAG3E,QAAA,cAAc,CAAC,IAAI,CAAC,YAAY,EAAE,EAAE,KAAK,EAAE,MAAM,CAAC,QAAQ,EAAE,EAAE,CAAC;;YAG/D,KAAK,CAAC,MAAM,EAAE;IACX,YAAA,OAAO,EAAE;IACN,gBAAA,kBAAkB,EAAE,gBAAgB;IACpC,gBAAA,iBAAiB,EAAE,UAAU;IAC/B,aAAA;IACD,YAAA,IAAI,EAAE,aAAa;IACnB,YAAA,QAAQ,EAAE,QAAQ;IAClB,YAAA,SAAS,EAAE,IAAI;aACjB;IACG,aAAA,IAAI,CAAC,CAAC,QAAQ,KAAI;gBAChB;IACI,iBAAA,IAAI;IACJ,iBAAA,IAAI,CAAC,CAAC,YAAY,KAAI;IACpB,gBAAA,IAAI,YAAY;;IAGhB,gBAAA,IAAI,YAAY,IAAI,YAAY,CAAC,IAAI,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE;IACtD,oBAAA,IAAI;IACD,wBAAA,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC;wBAC1C;wBAAE,OAAO,UAAU,EAAE;4BAClB,YAAY,GAAG,YAAY;wBAC9B;oBACH;yBAAO;IACJ,oBAAA,YAAY,GAAG,YAAY,IAAI,EAAE,CAAC;oBACrC;oBAEA,eAAe,CAAC,YAAY,CAAC;IAChC,YAAA,CAAC;qBACA,KAAK,CAAC,CAAC,KAAK,KAAK,WAAW,CAAC,KAAK,CAAC,CAAC;IAC3C,QAAA,CAAC;iBACA,KAAK,CAAC,CAAC,KAAK,KAAK,WAAW,CAAC,KAAK,CAAC,CAAC;IAExC;;;IAGG;YACH,SAAS,WAAW,CAAC,KAAU,EAAA;;IAE5B,YAAA,IAAI,KAAK,CAAC,QAAQ,EAAE;IACjB,gBAAA,KAAK,CAAC;IACF,qBAAA,IAAI;IACJ,qBAAA,IAAI,CAAC,CAAC,gBAAqB,KAAI;IAC7B,oBAAA,IAAI,SAAS;IAEb,oBAAA,IAAI;;4BAED,SAAS,GAAG,gBAAgB,EAAE,IAAI,EAAE,CAAC,UAAU,CAAC,GAAG;IAChD,8BAAE,IAAI,CAAC,KAAK,CAAC,gBAAgB;kCAC3B,gBAAgB;wBACxB;wBAAE,OAAO,UAAU,EAAE;;4BAElB,SAAS,GAAG,gBAAgB;wBAC/B;IAEA,oBAAA,eAAe,CAAC,SAAS,IAAI,EAAE,CAAC;IAEhC,oBAAA,cAAc,CAAC,IAAI,CAAC,MAAM,EAAE;IACzB,wBAAA,KAAK,EAAE,MAAM,CAAC,QAAQ,EAAE;IACxB,wBAAA,OAAO,EAAE,KAAK;IACd,wBAAA,KAAK,EAAE,KAAK,CAAC,OAAO,IAAI,0BAA0B;IAClD,wBAAA,IAAI,EAAE,SAAS;IACjB,qBAAA,CAAC;IACL,gBAAA,CAAC;yBACA,KAAK,CAAC,MAAK;wBACT,eAAe,CAAC,EAAE,CAAC;;IAGnB,oBAAA,cAAc,CAAC,IAAI,CAAC,MAAM,EAAE;IACzB,wBAAA,KAAK,EAAE,MAAM,CAAC,QAAQ,EAAE;IACxB,wBAAA,OAAO,EAAE,KAAK;IACd,wBAAA,KAAK,EAAE,KAAK,CAAC,OAAO,IAAI,+BAA+B;IACzD,qBAAA,CAAC;IACL,gBAAA,CAAC,CAAC;gBACR;qBAAO;oBACJ,eAAe,CAAC,EAAE,CAAC;;IAGnB,gBAAA,cAAc,CAAC,IAAI,CAAC,MAAM,EAAE;IACzB,oBAAA,KAAK,EAAE,MAAM,CAAC,QAAQ,EAAE;IACxB,oBAAA,OAAO,EAAE,KAAK;IACd,oBAAA,KAAK,EAAE,KAAK,CAAC,OAAO,IAAI,yBAAyB;IACnD,iBAAA,CAAC;gBACL;YACH;IAEA;;IAEG;YACH,SAAS,eAAe,CAAC,YAAoC,EAAA;IAC1D,YAAA,MAAM,SAAS,GAAoB,OAAO,YAAY,KAAK;IACxD,kBAAE,EAAE,OAAO,EAAE,YAAY;sBACvB,YAAY;;IAGjB,YAAA,IAAI,SAAS,EAAE,KAAK,IAAI,SAAS,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;IACjD,gBAAA,QAAQ,CAAC,KAAK,GAAG,SAAS,CAAC,KAAK;gBACnC;;gBAGA,MAAM,aAAa,GAChB,QAAQ,CAAC,cAAc,CAAC,SAAS,EAAE,QAAQ,CAAC;oBAC5C,QAAQ,CAAC,cAAc,CAAC,OAAO,CAAC,KAAK,EAAE,QAAQ,CAAC;oBAChD,QAAQ,CAAC,IAAI;IAEhB,YAAA,IAAI,SAAS,EAAE,QAAQ,EAAE;IACtB,gBAAA,cAAc,CAAC,aAAa,CAAC,SAAS,CAAC,QAAQ,CAAC,GAAG;IAChD,oBAAA,KAAK,EAAE,MAAM;IACb,oBAAA,KAAK,EAAE,SAAS,CAAC,KAAK,IAAI,KAAK;IAC/B,oBAAA,cAAc,EAAE,cAAc,CAAC,aAAa,CAAC,SAAS,CAAC,QAAQ,CAAC,EAAE,cAAc,IAAI,aAAa,CAAC;qBACpG;gBACJ;IAEA,YAAA,MAAM,aAAa,GAAG,cAAc,CAAC,aAAa;IAElD,YAAA,KAAK,MAAM,QAAQ,IAAI,aAAa,EAAE;oBACnC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,aAAa,EAAE,QAAQ,CAAC;wBAAE;IAE7C,gBAAA,MAAM,UAAU,GAAG,aAAa,CAAC,QAAQ,CAAC;;;;;IAM1C,gBAAA,IAAI,UAAU,CAAC,KAAK,KAAK,IAAI,IAAI,QAAQ,KAAK,SAAS,EAAE,QAAQ,EAAE;wBAChE,IAAI,WAAW,GAAG,QAAQ,CAAC,cAAc,CAAC,QAAQ,CAAC;wBACnD,IAAI,WAAW,EAAE;IACd,wBAAA,IAAI;gCACD,QAAQ,CAAC,WAAW,EAAE,OAAO,GAAG,UAAU,CAAC,cAAc,GAAG,QAAQ,EAAE;IACnE,gCAAA,YAAY,EAAE;IAChB,6BAAA,CAAC;4BACL;IAAE,wBAAA,MAAM;IACL,4BAAA,WAAW,CAAC,SAAS,GAAG,UAAU,CAAC,cAAc;4BACpD;wBACH;IAEA,oBAAA,OAAO,aAAa,CAAC,QAAQ,CAAC;oBACjC;gBACH;;gBAGA,MAAM,SAAS,GAAG,MAAK;IACpB,gBAAA,IAAI;wBACD,QAAQ,CAAC,aAAa,EAAE,OAAO,GAAG,SAAS,CAAC,OAAO,GAAG,QAAQ,EAAE;IAC7D,wBAAA,YAAY,EAAE;IAChB,qBAAA,CAAC;oBACL;IAAE,gBAAA,MAAM;IACL,oBAAA,aAAa,CAAC,SAAS,GAAG,SAAS,CAAC,OAAO;oBAC9C;IACH,YAAA,CAAC;IAGD,YAAA,MAAM,SAAS,GAAgB;IAC5B,gBAAA,GAAG,EAAE,MAAM,CAAC,QAAQ,EAAE;IACtB,gBAAA,KAAK,EAAE,SAAS,EAAE,KAAK,IAAI,QAAQ,CAAC,KAAK;oBACzC,QAAQ,EAAE,aAAa,CAAC,EAAE;oBAC1B,OAAO,EAAE,SAAS,CAAC,OAAO;oBAC1B,KAAK,EAAE,aAAa,CAAC,SAAS,EAAE,QAAQ,CAAC,EAAE,KAAK;oBAChD,cAAc,EAAE,aAAa,CAAC,SAAS,EAAE,QAAQ,CAAC,EAAE,cAAc;iBACpE;;IAGD,YAAA,IAAI,SAAS,EAAE,UAAU,EAAE;IACxB,gBAAA,SAAS,CAAC,UAAU,GAAG,SAAS,CAAC,UAAU;gBAC9C;gBAEA,MAAM,kBAAkB,GAAG,MAAK;;IAG7B,gBAAA,IAAI,KAAK,KAAK,MAAM,EAAE;wBACnB,cAAc,CAAC,SAAS,CAAC,SAAS,EAAE,SAAS,CAAC,KAAK,EAAE,MAAM,CAAC;oBAC/D;IAAO,qBAAA,IAAI,KAAK,KAAK,SAAS,EAAE;wBAC7B,cAAc,CAAC,YAAY,CAAC,SAAS,EAAE,SAAS,CAAC,KAAK,EAAE,MAAM,CAAC;oBAClE;;IAGA,gBAAA,MAAM,WAAW,GAAG,QAAQ,CAAC,cAAc,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;oBAErE,IAAI,WAAW,EAAE;IACd,oBAAA,MAAM,CAAC;4BACJ,GAAG,EAAE,WAAW,CAAC,SAAS;4BAC1B,IAAI,EAAE,WAAW,CAAC,UAAU;IAC9B,qBAAA,CAAC;oBACL;yBAAO;IACJ,oBAAA,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;oBAChB;;oBAIA,cAAc,CAAC,YAAY,EAAE;oBAC7B,cAAc,CAAC,oBAAoB,EAAE;;oBAGrC,cAAc,CAAC,MAAM,EAAE;;IAGvB,gBAAA,cAAc,CAAC,IAAI,CAAC,MAAM,EAAE;IACzB,oBAAA,KAAK,EAAE,MAAM,CAAC,QAAQ,EAAE;IACxB,oBAAA,OAAO,EAAE,IAAI;IACb,oBAAA,KAAK,EAAE,KAAK;IACd,iBAAA,CAAC;;IAGF,gBAAA,IAAI,SAAS,EAAE,UAAU,EAAE;wBACxB,UAAU,CAAC,UAAU,CAAC,eAAe,EAAE,SAAS,CAAC,UAAU,CAAC;oBAC/D;IACH,YAAA,CAAC;IAED,YAAA,IAAI,QAAQ,CAAC,mBAAmB,EAAE;IAC/B,gBAAA,QAAQ,CAAC,mBAAmB,CAAC,SAAS,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,KAAK,CAAC,CAAC,MAAM,KAAI;IACxF,oBAAA,cAAc,CAAC,IAAI,CAAC,MAAM,EAAE;IACzB,wBAAA,KAAK,EAAE,MAAM,CAAC,QAAQ,EAAE;IACxB,wBAAA,OAAO,EAAE,KAAK;4BACd,KAAK,EAAE,MAAM,IAAI,sCAAsC;IACzD,qBAAA,CAAC;IACL,gBAAA,CAAC,CAAC;gBACL;qBAAO;IACJ,gBAAA,SAAS,EAAE;IACX,gBAAA,kBAAkB,EAAE;gBACvB;YACH;QACH;IAEA;;;IAGG;IACI,IAAA,OAAO,IAAI,GAAA;YACf,OAAO,CAAC,IAAI,EAAE;QACjB;IAEA;;;IAGG;IACI,IAAA,OAAO,OAAO,GAAA;YAClB,OAAO,CAAC,OAAO,EAAE;QACpB;IAEA;;;IAGG;IACI,IAAA,OAAO,MAAM,GAAA;YACjB,UAAU,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,EAAE,SAAS,CAAC;QACtD;IAEA;;;;;IAKG;IACI,IAAA,OAAO,EAAE,CAAC,KAAwB,EAAE,QAAoB,EAAA;YAC5D,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE;IAChC,YAAA,cAAc,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,EAAE;YACpC;YACA,cAAc,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC;QAC9C;IAEA;;;;;;IAMG;IACI,IAAA,OAAO,SAAS,CAAC,QAAkC,EAAE,eAA8B,IAAI,EAAA;IAC3F,QAAA,cAAc,CAAC,cAAc,CAAC,QAAQ,EAAE,YAAY,CAAC;QACxD;IAEA;;;;;;;;;;;;IAYG;IACI,IAAA,OAAO,QAAQ,CAAC,GAAW,EAAE,KAAqB,EAAA;YACtD,OAAO,IAAI,OAAO,CAAC,OAAO,OAAO,EAAE,MAAM,KAAI;IAC1C,YAAA,MAAM,aAAa,GAAG,cAAc,CAAC,aAAa;IAClD,YAAA,MAAM,YAAY,GAAG,IAAI,CAAC,SAAS,CAAC,EAAE,KAAK,EAAE,EAAE,GAAG,EAAE,KAAK,EAAE,EAAE,CAAC;gBAC9D,MAAM,QAAQ,GAAG,EAAE;IAEnB,YAAA,KAAK,MAAM,QAAQ,IAAI,aAAa,EAAE;oBACnC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,aAAa,EAAE,QAAQ,CAAC;wBAAE;oBAE7C,MAAM,EAAE,KAAK,EAAE,GAAG,aAAa,CAAC,QAAQ,CAAC;IAEzC,gBAAA,MAAM,IAAI,GAAG,KAAK,CAAC,KAAK,EAAE;IACvB,oBAAA,OAAO,EAAE;IACN,wBAAA,kBAAkB,EAAE,gBAAgB;IACpC,wBAAA,aAAa,EAAE,CAAA,OAAA,EAAU,YAAY,CAAC,YAAY,CAAC,CAAA,CAAE;IACvD,qBAAA;IACD,oBAAA,IAAI,EAAE,aAAa;IACnB,oBAAA,QAAQ,EAAE,QAAQ;IAClB,oBAAA,SAAS,EAAE,IAAI;IACjB,iBAAA,CAAC;IACF,gBAAA,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC;gBACtB;gBAEA,MAAM,SAAS,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC;IAE7C,YAAA,SAAS,CAAC,OAAO,CAAC,OAAO,QAAQ,KAAI;IAClC,gBAAA,IAAI;IACD,oBAAA,MAAM,YAAY,GAAG,MAAM,QAAQ,CAAC,IAAI,EAAE;IAC1C,oBAAA,IAAI,YAAY;;IAGhB,oBAAA,IAAI,YAAY,IAAI,YAAY,CAAC,IAAI,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE;IACtD,wBAAA,IAAI;IACD,4BAAA,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC;4BAC1C;4BAAE,OAAO,UAAU,EAAE;gCAClB,YAAY,GAAG,YAAY;4BAC9B;wBACH;6BAAO;IACJ,wBAAA,YAAY,GAAG,YAAY,IAAI,EAAE;wBACpC;IAEA,oBAAA,OAAO,EAAE;wBACT,aAAa,CAAC,YAAY,CAAC;oBAC9B;oBAAE,OAAO,KAAK,EAAE;wBACb,MAAM,CAAC,KAAK,CAAC;wBACb,gBAAgB,CAAC,KAAK,CAAC;oBAC1B;IACH,YAAA,CAAC,CAAC;IAGF;;IAEG;gBACH,SAAS,gBAAgB,CAAC,KAAU,EAAA;IACjC,gBAAA,IAAI,KAAK,EAAE,QAAQ,EAAE;IAClB,oBAAA,KAAK,CAAC;IACF,yBAAA,IAAI;IACJ,yBAAA,IAAI,CAAC,CAAC,gBAAqB,KAAI;IAC7B,wBAAA,IAAI,SAAS;IAEb,wBAAA,IAAI;gCACD,SAAS,GAAG,gBAAgB,EAAE,IAAI,EAAE,CAAC,UAAU,CAAC,GAAG;IAChD,kCAAE,IAAI,CAAC,KAAK,CAAC,gBAAgB;sCAC3B,gBAAgB;4BACxB;4BAAE,OAAO,UAAU,EAAE;gCAClB,SAAS,GAAG,gBAAgB;4BAC/B;IAEA,wBAAA,aAAa,CAAC,SAAS,IAAI,EAAE,CAAC;IACjC,oBAAA,CAAC;6BACA,KAAK,CAAC,MAAK;4BACT,aAAa,CAAC,EAAE,CAAC;IACpB,oBAAA,CAAC,CAAC;oBACR;yBAAO;wBACJ,aAAa,CAAC,EAAE,CAAC;oBACpB;gBACH;IAEA;;;IAGG;gBACH,SAAS,aAAa,CAAC,YAAoC,EAAA;IAC3D,gBAAA,MAAM,SAAS,GAAoB,OAAO,YAAY,KAAK;IACxD,sBAAE,EAAE,OAAO,EAAE,YAAY;0BACvB,YAAY;;IAGd,gBAAA,IAAI,SAAS,EAAE,KAAK,IAAI,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,CAAC,EAAE;IACzD,oBAAA,QAAQ,CAAC,KAAK,GAAG,SAAS,CAAC,KAAK;oBACnC;;oBAGA,MAAM,aAAa,GAChB,QAAQ,CAAC,cAAc,CAAC,SAAS,EAAE,QAAQ,CAAC;wBAC5C,QAAQ,CAAC,cAAc,CAAC,OAAO,CAAC,KAAK,EAAE,QAAQ,CAAC;wBAChD,QAAQ,CAAC,IAAI;oBAEhB,MAAM,SAAS,GAAG,MAAK;IACpB,oBAAA,IAAI;4BACD,QAAQ,CAAC,aAAa,EAAE,OAAO,GAAG,SAAS,CAAC,OAAO,GAAG,QAAQ,EAAE;IAC7D,4BAAA,YAAY,EAAE;IAChB,yBAAA,CAAC;wBACL;IAAE,oBAAA,MAAM;IACL,wBAAA,aAAa,CAAC,SAAS,GAAG,SAAS,CAAC,OAAO;wBAC9C;IACH,gBAAA,CAAC;oBAED,MAAM,kBAAkB,GAAG,MAAK;;IAE7B,oBAAA,cAAc,CAAC,cAAc,CAAC,GAAG,EAAE,KAAK,CAAC;IAC5C,gBAAA,CAAC;IAED,gBAAA,SAAS,EAAE;IACX,gBAAA,kBAAkB,EAAE;gBACvB;IACH,QAAA,CAAC,CAAC;QACL;IAEA;;;IAGG;IACH,IAAA,OAAO,eAAe,GAAA;;IAGnB,QAAA,KAAK,CAAC,QAAQ,CAAC,QAAQ,EAAE,EAAE;IACxB,YAAA,OAAO,EAAE;IACN,gBAAA,kBAAkB,EAAE,gBAAgB;IACtC,aAAA;IACD,YAAA,IAAI,EAAE,aAAa;IACnB,YAAA,QAAQ,EAAE,QAAQ;IAClB,YAAA,SAAS,EAAE,IAAI;aACjB;IACG,aAAA,IAAI,CAAC,CAAC,QAAQ,KAAI;gBAChB;IACI,iBAAA,IAAI;IACJ,iBAAA,IAAI,CAAC,CAAC,YAAY,KAAI;IACpB,gBAAA,IAAI,YAAY;;IAGhB,gBAAA,IAAI,YAAY,IAAI,YAAY,CAAC,IAAI,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE;IACtD,oBAAA,IAAI;IACD,wBAAA,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC;wBAC1C;wBAAE,OAAO,UAAU,EAAE;4BAClB,YAAY,GAAG,YAAY;wBAC9B;oBACH;yBAAO;IACJ,oBAAA,YAAY,GAAG,YAAY,IAAI,EAAE;oBACpC;oBAEA,sBAAsB,CAAC,YAAY,CAAC;IACvC,YAAA,CAAC;IACA,iBAAA,KAAK,CAAC,CAAC,KAAK,KAAI;oBACd,oBAAoB,CAAC,KAAK,CAAC;IAC9B,YAAA,CAAC,CAAC;IACR,QAAA,CAAC;IACA,aAAA,KAAK,CAAC,CAAC,KAAK,KAAI;gBACd,oBAAoB,CAAC,KAAK,CAAC;IAC9B,QAAA,CAAC,CAAC;IAEL;;IAEG;YACH,SAAS,oBAAoB,CAAC,KAAU,EAAA;IACrC,YAAA,IAAI,KAAK,EAAE,QAAQ,EAAE;IAClB,gBAAA,KAAK,CAAC;IACF,qBAAA,IAAI;IACJ,qBAAA,IAAI,CAAC,CAAC,gBAAwB,KAAI;IAChC,oBAAA,IAAI,SAAS;IAEb,oBAAA,IAAI;4BACD,SAAS,GAAG,gBAAgB,EAAE,IAAI,EAAE,CAAC,UAAU,CAAC,GAAG;IAChD,8BAAE,IAAI,CAAC,KAAK,CAAC,gBAAgB;kCAC3B,gBAAgB;wBACxB;wBAAE,OAAO,UAAU,EAAE;4BAClB,SAAS,GAAG,gBAAgB;wBAC/B;IAEA,oBAAA,sBAAsB,CAAC,SAAS,IAAI,EAAE,CAAC;IAC1C,gBAAA,CAAC;yBACA,KAAK,CAAC,MAAK;wBACT,sBAAsB,CAAC,EAAE,CAAC;IAC7B,gBAAA,CAAC,CAAC;gBACR;qBAAO;oBACJ,sBAAsB,CAAC,EAAE,CAAC;gBAC7B;YACH;IAEA;;IAEG;YACH,SAAS,sBAAsB,CAAC,YAAoC,EAAA;IACjE,YAAA,MAAM,SAAS,GAAoB,OAAO,YAAY,KAAK;IACxD,kBAAE,EAAE,OAAO,EAAE,YAAY;sBACvB,YAAY;;IAGjB,YAAA,IAAI,SAAS,EAAE,KAAK,IAAI,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,CAAC,EAAE;IACzD,gBAAA,QAAQ,CAAC,KAAK,GAAG,SAAS,CAAC,KAAK;gBACnC;;gBAGA,MAAM,aAAa,GAChB,QAAQ,CAAC,cAAc,CAAC,SAAS,EAAE,QAAQ,CAAC;oBAC5C,QAAQ,CAAC,cAAc,CAAC,OAAO,CAAC,KAAK,EAAE,QAAQ,CAAC;oBAChD,QAAQ,CAAC,IAAI;gBAEhB,MAAM,SAAS,GAAG,MAAK;IACpB,gBAAA,IAAI;wBACD,QAAQ,CAAC,aAAa,EAAE,OAAO,GAAG,SAAS,CAAC,OAAO,GAAG,QAAQ,EAAE;IAC7D,wBAAA,YAAY,EAAE;IAChB,qBAAA,CAAC;oBACL;IAAE,gBAAA,MAAM;IACL,oBAAA,aAAa,CAAC,SAAS,GAAG,SAAS,CAAC,OAAO;oBAC9C;IACH,YAAA,CAAC;gBAED,MAAM,kBAAkB,GAAG,MAAK;;oBAE7B,cAAc,CAAC,YAAY,EAAE;oBAC7B,cAAc,CAAC,oBAAoB,EAAE;;oBAGrC,cAAc,CAAC,MAAM,EAAE;;IAGvB,gBAAA,IAAI,SAAS,EAAE,UAAU,EAAE;wBACxB,UAAU,CAAC,UAAU,CAAC,eAAe,EAAE,SAAS,CAAC,UAAU,CAAC;oBAC/D;IACH,YAAA,CAAC;IAED,YAAA,SAAS,EAAE;IACX,YAAA,kBAAkB,EAAE;YACvB;QACH;IAEA;;;;;;;IAOG;QACI,aAAa,MAAM,CAAC,KAAa,EAAE,GAAG,IAAW,EAAA;IACrD,QAAA,MAAM,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,EAAE,MAAM,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,EAAE,CAAC;IAE/D,QAAA,IAAI;gBACD,MAAM,QAAQ,GAAG,MAAM,KAAK,CAAC,QAAQ,CAAC,QAAQ,EAAE;IAC7C,gBAAA,OAAO,EAAE;IACN,oBAAA,kBAAkB,EAAE,gBAAgB;IACpC,oBAAA,aAAa,EAAE,CAAA,OAAA,EAAU,YAAY,CAAC,WAAW,CAAC,CAAA,CAAE;IACtD,iBAAA;IACD,gBAAA,IAAI,EAAE,aAAa;IACnB,gBAAA,QAAQ,EAAE,QAAQ;IAClB,gBAAA,SAAS,EAAE,IAAI;IACjB,aAAA,CAAC;IAEF,YAAA,MAAM,YAAY,GAAG,MAAM,QAAQ,CAAC,IAAI,EAAE;IAC1C,YAAA,IAAI,YAAY;;IAGhB,YAAA,IAAI,YAAY,IAAI,YAAY,CAAC,IAAI,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE;IACtD,gBAAA,IAAI;IACD,oBAAA,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC;wBACvC,YAAY,GAAG,YAAY,EAAE;8BACxB,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,QAAQ;8BAChC,YAAY;oBACpB;oBAAE,OAAO,UAAU,EAAE;wBAClB,YAAY,GAAG,YAAY;oBAC9B;gBACH;qBAAO;IACJ,gBAAA,YAAY,GAAG,YAAY,IAAI,EAAE;gBACpC;IAEA,YAAA,OAAO,YAAY;YACtB;YAAE,OAAO,KAAU,EAAE;;IAElB,YAAA,IAAI,KAAK,EAAE,QAAQ,EAAE;IAClB,gBAAA,IAAI;wBACD,MAAM,gBAAgB,GAAG,MAAM,KAAK,CAAC,QAAQ,CAAC,IAAI,EAAE;IACpD,oBAAA,IAAI,SAAS;IAEb,oBAAA,IAAI;4BACD,SAAS,GAAG,gBAAgB,EAAE,IAAI,EAAE,CAAC,UAAU,CAAC,GAAG;IAChD,8BAAE,IAAI,CAAC,KAAK,CAAC,gBAAgB;kCAC3B,gBAAgB;4BAErB,SAAS,GAAG,SAAS,EAAE;kCAClB,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,QAAQ;kCAC7B,SAAS;wBACjB;wBAAE,OAAO,UAAU,EAAE;4BAClB,SAAS,GAAG,gBAAgB;wBAC/B;IAEA,oBAAA,OAAO,SAAS;oBACnB;IAAE,gBAAA,MAAM;IACL,oBAAA,OAAO,EAAE;oBACZ;gBACH;qBAAO;;IAEJ,gBAAA,OAAO,EAAE;gBACZ;YACH;QACH;IACF;;ICvlBD;;;IAGG;IACH,MAAM,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,MAAK;QAC9C,MAAM,aAAa,GAAG,QAAQ,CAAC,aAAa,CAAC,sBAAsB,CAAC;QACpE,MAAM,iBAAiB,GAAG,QAAQ,CAAC,aAAa,CAAC,sBAAsB,CAAC;IACxE,IAAA,MAAM,GAAG,GAAG,QAAQ,CAAC,QAAQ,EAAE;IAE/B,IAAA,cAAc,CAAC,IAAI,CAAC,MAAM,EAAE;IACzB,QAAA,KAAK,EAAE,GAAG;IACV,QAAA,OAAO,EAAE,IAAI;IACb,QAAA,KAAK,EAAE;IACT,KAAA,CAAC;QAEF,IAAI,aAAa,EAAE;IAChB;;IAEG;IACH,QAAA,MAAM,YAAY,GAAgB;IAC/B,YAAA,GAAG,EAAE,GAAG;gBACR,KAAK,EAAE,QAAQ,CAAC,KAAK;gBACrB,QAAQ,EAAE,aAAa,CAAC,EAAE;gBAC1B,OAAO,EAAE,aAAa,CAAC,SAAS;IAChC,YAAA,IAAI,EAAE,IAAI;aACZ;;IAGD,QAAA,IAAI,aAAa,CAAC,YAAY,CAAC,oBAAoB,CAAC,EAAE;IACnD,YAAA,YAAY,CAAC,UAAU,GAAG,MAAM,CAC7B,aAAa,CAAC,YAAY,CAAC,oBAAoB,CAAC,CAClD;YACJ;;YAGA,IAAI,iBAAiB,EAAE;gBACpB,MAAM,UAAU,GAAG,iBAAiB,CAAC,YAAY,CAAC,oBAAoB,CAAC;IAUvE,YAAA,MAAM,cAAc,GAAkB,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,UAAU,IAAI,EAAE,CAAC,CAAC;gBAEhF,cAAc,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,QAAgB,EAAE,KAAa,KAAI;oBAClE,MAAM,KAAK,GAAG,cAAc,CAAC,KAAK,CAAC,KAAK,CAAC;oBACzC,MAAM,cAAc,GAAG,cAAc,CAAC,cAAc,CAAC,KAAK,CAAC;IAE3D,gBAAA,IAAI,QAAQ,KAAK,aAAa,CAAC,EAAE,EAAE;IAChC,oBAAA,YAAY,CAAC,OAAO,CAAC,GAAG,KAAK;IAC7B,oBAAA,YAAY,CAAC,gBAAgB,CAAC,GAAG,cAAc;oBAClD;IAEA,gBAAA,cAAc,CAAC,aAAa,CAAC,QAAQ,CAAC,GAAG;IACtC,oBAAA,KAAK,EAAE,IAAI,GAAG,CAAC,cAAc,CAAC,aAAa,CAAC,KAAK,CAAC,EAAE,GAAG,CAAC;wBACxD,cAAc;wBACd;qBACF;IACJ,YAAA,CAAC,CAAC;YACL;;YAGA,cAAc,CAAC,YAAY,CACxB,YAAY,EACZ,QAAQ,CAAC,KAAK,EACd,GAAG,CACL;;IAGD,QAAA,IAAI,YAAY,CAAC,UAAU,EAAE;gBAC1B,UAAU,CAAC,UAAU,CAAC,eAAe,EAAE,YAAY,CAAC,UAAU,CAAC;YAClE;QACH;IACH,CAAC,CAAC;IAGF;;;IAGG;IACH,MAAM,CAAC,gBAAgB,CAAC,UAAU,EAAE,CAAC,KAAoB,KAAI;IAC1D,IAAA,MAAM,eAAe,GAAgB,KAAK,CAAC,KAAK;IAEhD,IAAA,cAAc,CAAC,IAAI,CAAC,YAAY,EAAE,EAAE,KAAK,EAAE,QAAQ,CAAC,QAAQ,EAAE,EAAE,CAAC;;IAGjE,IAAA,OAAO,CAAC,iBAAiB,GAAG,MAAM;;IAGlC,IAAA,IAAI,eAAe,IAAI,eAAe,CAAC,OAAO,EAAE;;YAE7C,QAAQ,CAAC,KAAK,GAAG,eAAe,CAAC,KAAK,IAAI,QAAQ,CAAC,KAAK;;YAGxD,MAAM,eAAe,GAClB,QAAQ,CAAC,cAAc,CAAC,eAAe,CAAC,QAAQ,CAAC;YAEpD,IAAI,CAAC,eAAe,EAAE;gBACnB,QAAQ,CAAC,MAAM,EAAE;gBACjB;YACH;IAEA,QAAA,IAAI,eAAe,CAAC,QAAQ,EAAE;IAC3B,YAAA,cAAc,CAAC,aAAa,CAAC,eAAe,CAAC,QAAQ,CAAC,GAAG;IACtD,gBAAA,KAAK,EAAE,IAAI,GAAG,CAAC,eAAe,CAAC,GAAG,CAAC;IACnC,gBAAA,KAAK,EAAE,eAAe,CAAC,KAAK,IAAI,KAAK;IACrC,gBAAA,cAAc,EAAE,eAAe,CAAC,cAAc,IAAI;iBACpD;YACJ;IAEA,QAAA,MAAM,aAAa,GAAG,cAAc,CAAC,aAAa;IAElD,QAAA,KAAK,MAAM,QAAQ,IAAI,aAAa,EAAE;gBACnC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,aAAa,EAAE,QAAQ,CAAC;oBAAE;IAE7C,YAAA,MAAM,UAAU,GAAG,aAAa,CAAC,QAAQ,CAAC;;;;;IAM1C,YAAA,IAAI,UAAU,CAAC,KAAK,KAAK,IAAI,IAAI,QAAQ,KAAK,eAAe,CAAC,QAAQ,EAAE;oBACrE,IAAI,WAAW,GAAG,QAAQ,CAAC,cAAc,CAAC,QAAQ,CAAC;oBACnD,IAAI,WAAW,EAAE;IACd,oBAAA,IAAI;4BACD,QAAQ,CAAC,WAAW,EAAE,OAAO,GAAG,UAAU,CAAC,cAAc,GAAG,QAAQ,EAAE;IACnE,4BAAA,YAAY,EAAE;IAChB,yBAAA,CAAC;wBACL;IAAE,oBAAA,MAAM;IACL,wBAAA,WAAW,CAAC,SAAS,GAAG,UAAU,CAAC,cAAc;wBACpD;oBACH;IAEA,gBAAA,OAAO,aAAa,CAAC,QAAQ,CAAC;gBACjC;YACH;;YAGA,MAAM,SAAS,GAAG,MAAK;IACpB,YAAA,IAAI;oBACD,QAAQ,CAAC,eAAe,EAAE,OAAO,GAAG,eAAe,CAAC,OAAO,GAAG,QAAQ,EAAE;IACrE,oBAAA,YAAY,EAAE;IAChB,iBAAA,CAAC;gBACL;IAAE,YAAA,MAAM;IACL,gBAAA,eAAe,CAAC,SAAS,GAAG,eAAe,CAAC,OAAO;gBACtD;IACH,QAAA,CAAC;YAED,MAAM,kBAAkB,GAAG,MAAK;;gBAE7B,cAAc,CAAC,YAAY,EAAE;gBAC7B,cAAc,CAAC,oBAAoB,EAAE;;gBAGrC,cAAc,CAAC,MAAM,EAAE;;IAGvB,YAAA,IAAI,eAAe,EAAE,UAAU,EAAE;oBAC9B,UAAU,CAAC,UAAU,CAAC,eAAe,EAAE,eAAe,CAAC,UAAU,CAAC;gBACrE;IAEA,YAAA,cAAc,CAAC,IAAI,CAAC,MAAM,EAAE;oBACzB,KAAK,EAAE,eAAe,CAAC,GAAG;IAC1B,gBAAA,OAAO,EAAE,IAAI;IACb,gBAAA,KAAK,EAAE;IACT,aAAA,CAAC;IACL,QAAA,CAAC;IAED,QAAA,IAAI,QAAQ,CAAC,mBAAmB,EAAE;IAC/B,YAAA,QAAQ,CAAC,mBAAmB,CAAC,SAAS,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,KAAK,CAAC,CAAC,MAAM,KAAI;IACxF,gBAAA,cAAc,CAAC,IAAI,CAAC,MAAM,EAAE;wBACzB,KAAK,EAAE,QAAQ,CAAC,IAAI;IACpB,oBAAA,OAAO,EAAE,KAAK;wBACd,KAAK,EAAE,MAAM,IAAI,sCAAsC;IACzD,iBAAA,CAAC;IACL,YAAA,CAAC,CAAC;YACL;iBAAO;IACJ,YAAA,SAAS,EAAE;IACX,YAAA,kBAAkB,EAAE;YACvB;QAEH;aAAO;;YAEJ,QAAQ,CAAC,MAAM,EAAE;QACpB;IACH,CAAC,CAAC;IAGF,IAAI,OAAO,MAAM,KAAK,WAAW,EAAE;IAChC,IAAA,IAAI,OAAO,MAAM,CAAC,QAAQ,KAAK,UAAU,EAAE;IACxC,QAAA,MAAM,CAAC,QAAQ,GAAG,UAAU,CAAC,QAAQ;QACxC;IAEA,IAAA,IAAI,OAAO,MAAM,CAAC,MAAM,KAAK,UAAU,EAAE;IACtC,QAAA,MAAM,CAAC,MAAM,GAAG,UAAU,CAAC,MAAM;QACpC;IAEA,IAAA,IAAI,OAAO,MAAM,CAAC,SAAS,KAAK,UAAU,EAAE;IACzC,QAAA,MAAM,CAAC,SAAS,GAAG,UAAU,CAAC,SAAS;QAC1C;IACH;;;;;;;;","x_google_ignoreList":[2]}